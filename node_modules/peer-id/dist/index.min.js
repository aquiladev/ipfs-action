(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.PeerId = factory()}(typeof self !== 'undefined' ? self : this, function () {
var PeerId=(()=>{var wa=Object.defineProperty;var pf=e=>wa(e,"__esModule",{value:!0});var rn=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ge=(e,t)=>{pf(e);for(var r in t)wa(e,r,{get:t[r],enumerable:!0})};function Ea(e,t,r){t=t||[],r=r||0;for(var n=r;e>=vf;)t[r++]=e&255|Sa,e/=128;for(;e&gf;)t[r++]=e&255|Sa,e>>>=7;return t[r]=e|0,Ea.bytes=r-n+1,t}function ii(e,t){var r=0,t=t||0,n=0,i=t,a,s=e.length;do{if(i>=s)throw ii.bytes=0,new RangeError("Could not decode varint");a=e[i++],r+=n<28?(a&Ba)<<n:(a&Ba)*Math.pow(2,n),n+=7}while(a>=mf);return ii.bytes=i-t,r}var df,Sa,yf,gf,vf,xf,mf,Ba,bf,wf,Sf,Ef,Bf,Af,Cf,Tf,If,_f,Rf,Df,yr,Aa=Y(()=>{df=Ea,Sa=128,yf=127,gf=~yf,vf=Math.pow(2,31);xf=ii,mf=128,Ba=127;bf=Math.pow(2,7),wf=Math.pow(2,14),Sf=Math.pow(2,21),Ef=Math.pow(2,28),Bf=Math.pow(2,35),Af=Math.pow(2,42),Cf=Math.pow(2,49),Tf=Math.pow(2,56),If=Math.pow(2,63),_f=function(e){return e<bf?1:e<wf?2:e<Sf?3:e<Ef?4:e<Bf?5:e<Af?6:e<Cf?7:e<Tf?8:e<If?9:10},Rf={encode:df,decode:xf,encodingLength:_f},Df=Rf,yr=Df});var gr,jt,$t,nn=Y(()=>{Aa();gr=e=>[yr.decode(e),yr.decode.bytes],jt=(e,t,r=0)=>(yr.encode(e,t,r),t),$t=e=>yr.encodingLength(e)});var Yd,Ta,at,Ia,_a,pt=Y(()=>{Yd=new Uint8Array(0),Ta=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},at=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ia=e=>new TextEncoder().encode(e),_a=e=>new TextDecoder().decode(e)});var an={};ge(an,{Digest:()=>Yt,create:()=>vr,decode:()=>ai,equals:()=>si});var vr,ai,si,Yt,xr=Y(()=>{pt();nn();vr=(e,t)=>{let r=t.byteLength,n=$t(e),i=n+$t(r),a=new Uint8Array(i+r);return jt(e,a,0),jt(r,a,n),a.set(t,i),new Yt(e,r,t,a)},ai=e=>{let t=at(e),[r,n]=gr(t),[i,a]=gr(t.subarray(n)),s=t.subarray(n+a);if(s.byteLength!==i)throw new Error("Incorrect length");return new Yt(r,i,s,t)},si=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&Ta(e.bytes,t.bytes),Yt=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}});function Pf(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),s=a.charCodeAt(0);if(r[s]!==255)throw new TypeError(a+" is ambiguous");r[s]=i}var o=e.length,f=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,x=0,b=0,E=p.length;b!==E&&p[b]===0;)b++,g++;for(var A=(E-b)*c+1>>>0,k=new Uint8Array(A);b!==E;){for(var _=p[b],R=0,O=A-1;(_!==0||R<x)&&O!==-1;O--,R++)_+=256*k[O]>>>0,k[O]=_%o>>>0,_=_/o>>>0;if(_!==0)throw new Error("Non-zero carry");x=R,b++}for(var G=A-x;G!==A&&k[G]===0;)G++;for(var ye=f.repeat(g);G<A;++G)ye+=e.charAt(k[G]);return ye}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var x=0,b=0;p[g]===f;)x++,g++;for(var E=(p.length-g)*u+1>>>0,A=new Uint8Array(E);p[g];){var k=r[p.charCodeAt(g)];if(k===255)return;for(var _=0,R=E-1;(k!==0||_<b)&&R!==-1;R--,_++)k+=o*A[R]>>>0,A[R]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");b=_,g++}if(p[g]!==" "){for(var O=E-b;O!==E&&A[O]===0;)O++;for(var G=new Uint8Array(x+(E-O)),ye=x;O!==E;)G[ye++]=A[O++];return G}}}function y(p){var g=l(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:y}}var Kf,kf,Da,Pa=Y(()=>{Kf=Pf,kf=Kf,Da=kf});var Ka,ka,Na,La,Ua,sn,dt,Nf,Lf,ae,Ve=Y(()=>{Pa();pt();Ka=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},ka=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseDecode=n}decode(t){if(typeof t=="string")switch(t[0]){case this.prefix:return this.baseDecode(t.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(t){return La(this,t)}},Na=class{constructor(t){this.decoders=t}or(t){return La(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},La=(e,t)=>new Na({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Ua=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ka(t,r,n),this.decoder=new ka(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},sn=({name:e,prefix:t,encode:r,decode:n})=>new Ua(e,t,r,n),dt=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=Da(r,t);return sn({prefix:e,name:t,encode:n,decode:a=>at(i(a))})},Nf=(e,t,r,n)=>{let i={};for(let c=0;c<t.length;++c)i[t[c]]=c;let a=e.length;for(;e[a-1]==="=";)--a;let s=new Uint8Array(a*r/8|0),o=0,f=0,u=0;for(let c=0;c<a;++c){let h=i[e[c]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|h,o+=r,o>=8&&(o-=8,s[u++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return s},Lf=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,a="",s=0,o=0;for(let f=0;f<e.length;++f)for(o=o<<8|e[f],s+=8;s>r;)s-=r,a+=t[i&o>>s];if(s&&(a+=t[i&o<<r-s]),n)for(;a.length*r&7;)a+="=";return a},ae=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>sn({prefix:t,name:e,encode(i){return Lf(i,n,r)},decode(i){return Nf(i,n,r,e)}})});var Qt={};ge(Qt,{base58btc:()=>ze,base58flickr:()=>Uf});var ze,Uf,Zt=Y(()=>{Ve();ze=dt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Uf=dt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var mr={};ge(mr,{base32:()=>Xt,base32hex:()=>Mf,base32hexpad:()=>zf,base32hexpadupper:()=>Hf,base32hexupper:()=>Vf,base32pad:()=>Of,base32padupper:()=>Ff,base32upper:()=>qf,base32z:()=>Gf});var Xt,qf,Of,Ff,Mf,Vf,zf,Hf,Gf,br=Y(()=>{Ve();Xt=ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qf=ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Of=ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ff=ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mf=ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Vf=ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zf=ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Hf=ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gf=ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Fa={};ge(Fa,{CID:()=>fe});var fe,Wf,jf,$f,wr,Yf,qa,Oa,on,un,Qf,Zf,Xf,oi=Y(()=>{nn();xr();Zt();br();pt();fe=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:un,byteLength:un,code:on,version:on,multihash:on,bytes:on,_baseCache:un,asCID:un})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==wr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Yf)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return fe.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=vr(t,r);return fe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&si(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return jf(r,i,t||ze.encoder);default:return $f(r,i,t||Xt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return Zf(/^0\.0/,Xf),!!(t&&(t[Oa]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof fe)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:i,bytes:a}=t;return new fe(r,n,i,a||qa(r,n,i.bytes))}else if(t!=null&&t[Oa]===!0){let{version:r,multihash:n,code:i}=t,a=ai(n);return fe.create(r,i,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==wr)throw new Error(`Version 0 CID must use dag-pb (code: ${wr}) block encoding`);return new fe(t,r,n,n.bytes)}case 1:{let i=qa(t,r,n.bytes);return new fe(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return fe.create(0,wr,t)}static createV1(t,r){return fe.create(1,t,r)}static decode(t){let[r,n]=fe.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=fe.inspectBytes(t),n=r.size-r.multihashSize,i=at(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let a=i.subarray(r.multihashSize-r.digestSize),s=new Yt(r.multihashCode,r.digestSize,a,i);return[r.version===0?fe.createV0(s):fe.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[h,l]=gr(t.subarray(r));return r+=l,h},i=n(),a=wr;if(i===18?(i=0,r=0):i===1&&(a=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,o=n(),f=n(),u=r+f,c=u-s;return{version:i,codec:a,multihashCode:o,digestSize:f,multihashSize:c,size:u}}static parse(t,r){let[n,i]=Wf(t,r),a=fe.decode(i);return a._baseCache.set(n,t),a}},Wf=(e,t)=>{switch(e[0]){case"Q":{let r=t||ze;return[ze.prefix,r.decode(`${ze.prefix}${e}`)]}case ze.prefix:{let r=t||ze;return[ze.prefix,r.decode(e)]}case Xt.prefix:{let r=t||Xt;return[Xt.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},jf=(e,t,r)=>{let{prefix:n}=r;if(n!==ze.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let a=r.encode(e).slice(1);return t.set(n,a),a}else return i},$f=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let a=r.encode(e);return t.set(n,a),a}else return i},wr=112,Yf=18,qa=(e,t,r)=>{let n=$t(e),i=n+$t(t),a=new Uint8Array(i+r.byteLength);return jt(e,a,0),jt(t,a,n),a.set(r,i),a},Oa=Symbol.for("@ipld/js-cid/CID"),on={writable:!1,configurable:!1,enumerable:!0},un={writable:!1,enumerable:!1,configurable:!1},Qf="0.0.0-dev",Zf=(e,t)=>{if(e.test(Qf))console.warn(t);else throw new Error(t)},Xf=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var fn={};ge(fn,{base36:()=>Jf,base36upper:()=>ec});var Jf,ec,ui=Y(()=>{Ve();Jf=dt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ec=dt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Jt={};ge(Jt,{base64:()=>tc,base64pad:()=>rc,base64url:()=>nc,base64urlpad:()=>ic});var tc,rc,nc,ic,Sr=Y(()=>{Ve();tc=ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rc=ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nc=ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ic=ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var cn={};ge(cn,{base16:()=>ac,base16upper:()=>sc});var ac,sc,fi=Y(()=>{Ve();ac=ae({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sc=ae({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Va=T((ly,Ma)=>{"use strict";Ma.exports=oc;function oc(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,a=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(o,f){r[n]=function(c){if(a)if(a=!1,c)f(c);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];o.apply(null,h)}};try{e.apply(t||null,r)}catch(u){a&&(a=!1,f(u))}})}});var Wa=T(Ga=>{"use strict";var hn=Ga;hn.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var er=new Array(64),za=new Array(123);for(qe=0;qe<64;)za[er[qe]=qe<26?qe+65:qe<52?qe+71:qe<62?qe-4:qe-59|43]=qe++;var qe;hn.encode=function(t,r,n){for(var i=null,a=[],s=0,o=0,f;r<n;){var u=t[r++];switch(o){case 0:a[s++]=er[u>>2],f=(u&3)<<4,o=1;break;case 1:a[s++]=er[f|u>>4],f=(u&15)<<2,o=2;break;case 2:a[s++]=er[f|u>>6],a[s++]=er[u&63],o=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return o&&(a[s++]=er[f],a[s++]=61,o===1&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var Ha="invalid encoding";hn.decode=function(t,r,n){for(var i=n,a=0,s,o=0;o<t.length;){var f=t.charCodeAt(o++);if(f===61&&a>1)break;if((f=za[f])===void 0)throw Error(Ha);switch(a){case 0:s=f,a=1;break;case 1:r[n++]=s<<2|(f&48)>>4,s=f,a=2;break;case 2:r[n++]=(s&15)<<4|(f&60)>>2,s=f,a=3;break;case 3:r[n++]=(s&3)<<6|f,a=0;break}}if(a===1)throw Error(Ha);return n-i};hn.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var $a=T((dy,ja)=>{"use strict";ja.exports=ln;function ln(){this._listeners={}}ln.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};ln.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};ln.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var ts=T((yy,es)=>{"use strict";es.exports=Ya(Ya);function Ya(e){return typeof Float32Array!="undefined"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(f,u,c){t[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3]}function a(f,u,c){t[0]=f,u[c]=r[3],u[c+1]=r[2],u[c+2]=r[1],u[c+3]=r[0]}e.writeFloatLE=n?i:a,e.writeFloatBE=n?a:i;function s(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],t[0]}function o(f,u){return r[3]=f[u],r[2]=f[u+1],r[1]=f[u+2],r[0]=f[u+3],t[0]}e.readFloatLE=n?s:o,e.readFloatBE=n?o:s}():function(){function t(n,i,a,s){var o=i<0?1:0;if(o&&(i=-i),i===0)n(1/i>0?0:2147483648,a,s);else if(isNaN(i))n(2143289344,a,s);else if(i>34028234663852886e22)n((o<<31|2139095040)>>>0,a,s);else if(i<11754943508222875e-54)n((o<<31|Math.round(i/1401298464324817e-60))>>>0,a,s);else{var f=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-f)*8388608)&8388607;n((o<<31|f+127<<23|u)>>>0,a,s)}}e.writeFloatLE=t.bind(null,Qa),e.writeFloatBE=t.bind(null,Za);function r(n,i,a){var s=n(i,a),o=(s>>31)*2+1,f=s>>>23&255,u=s&8388607;return f===255?u?NaN:o*(1/0):f===0?o*1401298464324817e-60*u:o*Math.pow(2,f-150)*(u+8388608)}e.readFloatLE=r.bind(null,Xa),e.readFloatBE=r.bind(null,Ja)}(),typeof Float64Array!="undefined"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(f,u,c){t[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3],u[c+4]=r[4],u[c+5]=r[5],u[c+6]=r[6],u[c+7]=r[7]}function a(f,u,c){t[0]=f,u[c]=r[7],u[c+1]=r[6],u[c+2]=r[5],u[c+3]=r[4],u[c+4]=r[3],u[c+5]=r[2],u[c+6]=r[1],u[c+7]=r[0]}e.writeDoubleLE=n?i:a,e.writeDoubleBE=n?a:i;function s(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],r[4]=f[u+4],r[5]=f[u+5],r[6]=f[u+6],r[7]=f[u+7],t[0]}function o(f,u){return r[7]=f[u],r[6]=f[u+1],r[5]=f[u+2],r[4]=f[u+3],r[3]=f[u+4],r[2]=f[u+5],r[1]=f[u+6],r[0]=f[u+7],t[0]}e.readDoubleLE=n?s:o,e.readDoubleBE=n?o:s}():function(){function t(n,i,a,s,o,f){var u=s<0?1:0;if(u&&(s=-s),s===0)n(0,o,f+i),n(1/s>0?0:2147483648,o,f+a);else if(isNaN(s))n(0,o,f+i),n(2146959360,o,f+a);else if(s>17976931348623157e292)n(0,o,f+i),n((u<<31|2146435072)>>>0,o,f+a);else{var c;if(s<22250738585072014e-324)c=s/5e-324,n(c>>>0,o,f+i),n((u<<31|c/4294967296)>>>0,o,f+a);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),c=s*Math.pow(2,-h),n(c*4503599627370496>>>0,o,f+i),n((u<<31|h+1023<<20|c*1048576&1048575)>>>0,o,f+a)}}}e.writeDoubleLE=t.bind(null,Qa,0,4),e.writeDoubleBE=t.bind(null,Za,4,0);function r(n,i,a,s,o){var f=n(s,o+i),u=n(s,o+a),c=(u>>31)*2+1,h=u>>>20&2047,l=4294967296*(u&1048575)+f;return h===2047?l?NaN:c*(1/0):h===0?c*5e-324*l:c*Math.pow(2,h-1075)*(l+4503599627370496)}e.readDoubleLE=r.bind(null,Xa,0,4),e.readDoubleBE=r.bind(null,Ja,4,0)}(),e}function Qa(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Za(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function Xa(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Ja(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var rs=T((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var is=T(ns=>{"use strict";var ci=ns;ci.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(t.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};ci.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var a=null,s=[],o=0,f;r<n;)f=t[r++],f<128?s[o++]=f:f>191&&f<224?s[o++]=(f&31)<<6|t[r++]&63:f>239&&f<365?(f=((f&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,s[o++]=55296+(f>>10),s[o++]=56320+(f&1023)):s[o++]=(f&15)<<12|(t[r++]&63)<<6|t[r++]&63,o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))};ci.write=function(t,r,n){for(var i=n,a,s,o=0;o<t.length;++o)a=t.charCodeAt(o),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)==55296&&((s=t.charCodeAt(o+1))&64512)==56320?(a=65536+((a&1023)<<10)+(s&1023),++o,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-i}});var ss=T((vy,as)=>{"use strict";as.exports=uc;function uc(e,t,r){var n=r||8192,i=n>>>1,a=null,s=n;return function(f){if(f<1||f>i)return e(f);s+f>n&&(a=e(n),s=0);var u=t.call(a,s,s+=f);return s&7&&(s=(s|7)+1),u}}});var us=T((xy,os)=>{"use strict";os.exports=he;var Er=gt();function he(e,t){this.lo=e>>>0,this.hi=t>>>0}var kt=he.zero=new he(0,0);kt.toNumber=function(){return 0};kt.zzEncode=kt.zzDecode=function(){return this};kt.length=function(){return 1};var fc=he.zeroHash="\0\0\0\0\0\0\0\0";he.fromNumber=function(t){if(t===0)return kt;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new he(n,i)};he.from=function(t){if(typeof t=="number")return he.fromNumber(t);if(Er.isString(t))if(Er.Long)t=Er.Long.fromString(t);else return he.fromNumber(parseInt(t,10));return t.low||t.high?new he(t.low>>>0,t.high>>>0):kt};he.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};he.prototype.toLong=function(t){return Er.Long?new Er.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var yt=String.prototype.charCodeAt;he.fromHash=function(t){return t===fc?kt:new he((yt.call(t,0)|yt.call(t,1)<<8|yt.call(t,2)<<16|yt.call(t,3)<<24)>>>0,(yt.call(t,4)|yt.call(t,5)<<8|yt.call(t,6)<<16|yt.call(t,7)<<24)>>>0)};he.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};he.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};he.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};he.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var gt=T(hi=>{"use strict";var P=hi;P.asPromise=Va();P.base64=Wa();P.EventEmitter=$a();P.float=ts();P.inquire=rs();P.utf8=is();P.pool=ss();P.LongBits=us();P.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);P.global=P.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||hi;P.emptyArray=Object.freeze?Object.freeze([]):[];P.emptyObject=Object.freeze?Object.freeze({}):{};P.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};P.isString=function(t){return typeof t=="string"||t instanceof String};P.isObject=function(t){return t&&typeof t=="object"};P.isset=P.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};P.Buffer=function(){try{var e=P.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}();P._Buffer_from=null;P._Buffer_allocUnsafe=null;P.newBuffer=function(t){return typeof t=="number"?P.Buffer?P._Buffer_allocUnsafe(t):new P.Array(t):P.Buffer?P._Buffer_from(t):typeof Uint8Array=="undefined"?t:new Uint8Array(t)};P.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;P.Long=P.global.dcodeIO&&P.global.dcodeIO.Long||P.global.Long||P.inquire("long");P.key2Re=/^true|false|0|1$/;P.key32Re=/^-?(?:0|[1-9][0-9]*)$/;P.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;P.longToHash=function(t){return t?P.LongBits.from(t).toHash():P.LongBits.zeroHash};P.longFromHash=function(t,r){var n=P.LongBits.fromHash(t);return P.Long?P.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function fs(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}P.merge=fs;P.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function cs(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&fs(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}P.newError=cs;P.ProtocolError=cs("ProtocolError");P.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),a=i.length-1;a>-1;--a)if(r[i[a]]===1&&this[i[a]]!==void 0&&this[i[a]]!==null)return i[a]}};P.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};P.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};P._configure=function(){var e=P.Buffer;if(!e){P._Buffer_from=P._Buffer_allocUnsafe=null;return}P._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},P._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var xi=T((by,ds)=>{"use strict";ds.exports=M;var _e=gt(),li,pn=_e.LongBits,hs=_e.base64,ls=_e.utf8;function Br(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function pi(){}function cc(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function M(){this.len=0,this.head=new Br(pi,0,0),this.tail=this.head,this.states=null}var ps=function(){return _e.Buffer?function(){return(M.create=function(){return new li})()}:function(){return new M}};M.create=ps();M.alloc=function(t){return new _e.Array(t)};_e.Array!==Array&&(M.alloc=_e.pool(M.alloc,_e.Array.prototype.subarray));M.prototype._push=function(t,r,n){return this.tail=this.tail.next=new Br(t,r,n),this.len+=r,this};function di(e,t,r){t[r]=e&255}function hc(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function yi(e,t){this.len=e,this.next=void 0,this.val=t}yi.prototype=Object.create(Br.prototype);yi.prototype.fn=hc;M.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new yi((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};M.prototype.int32=function(t){return t<0?this._push(gi,10,pn.fromNumber(t)):this.uint32(t)};M.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function gi(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}M.prototype.uint64=function(t){var r=pn.from(t);return this._push(gi,r.length(),r)};M.prototype.int64=M.prototype.uint64;M.prototype.sint64=function(t){var r=pn.from(t).zzEncode();return this._push(gi,r.length(),r)};M.prototype.bool=function(t){return this._push(di,1,t?1:0)};function vi(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}M.prototype.fixed32=function(t){return this._push(vi,4,t>>>0)};M.prototype.sfixed32=M.prototype.fixed32;M.prototype.fixed64=function(t){var r=pn.from(t);return this._push(vi,4,r.lo)._push(vi,4,r.hi)};M.prototype.sfixed64=M.prototype.fixed64;M.prototype.float=function(t){return this._push(_e.float.writeFloatLE,4,t)};M.prototype.double=function(t){return this._push(_e.float.writeDoubleLE,8,t)};var lc=_e.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};M.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(di,1,0);if(_e.isString(t)){var n=M.alloc(r=hs.length(t));hs.decode(t,n,0),t=n}return this.uint32(r)._push(lc,r,t)};M.prototype.string=function(t){var r=ls.length(t);return r?this.uint32(r)._push(ls.write,r,t):this._push(di,1,0)};M.prototype.fork=function(){return this.states=new cc(this),this.head=this.tail=new Br(pi,0,0),this.len=0,this};M.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Br(pi,0,0),this.len=0),this};M.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};M.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};M._configure=function(e){li=e,M.create=ps(),li._configure()}});var vs=T((wy,gs)=>{"use strict";gs.exports=He;var ys=xi();(He.prototype=Object.create(ys.prototype)).constructor=He;var vt=gt();function He(){ys.call(this)}He._configure=function(){He.alloc=vt._Buffer_allocUnsafe,He.writeBytesBuffer=vt.Buffer&&vt.Buffer.prototype instanceof Uint8Array&&vt.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};He.prototype.bytes=function(t){vt.isString(t)&&(t=vt._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(He.writeBytesBuffer,r,t),this};function pc(e,t,r){e.length<40?vt.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}He.prototype.string=function(t){var r=vt.Buffer.byteLength(t);return this.uint32(r),r&&this._push(pc,r,t),this};He._configure()});var wi=T((Sy,Ss)=>{"use strict";Ss.exports=se;var Ge=gt(),mi,xs=Ge.LongBits,dc=Ge.utf8;function Oe(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function se(e){this.buf=e,this.pos=0,this.len=e.length}var ms=typeof Uint8Array!="undefined"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new se(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new se(t);throw Error("illegal buffer")},bs=function(){return Ge.Buffer?function(r){return(se.create=function(i){return Ge.Buffer.isBuffer(i)?new mi(i):ms(i)})(r)}:ms};se.create=bs();se.prototype._slice=Ge.Array.prototype.subarray||Ge.Array.prototype.slice;se.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Oe(this,10);return t}}();se.prototype.int32=function(){return this.uint32()|0};se.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function bi(){var e=new xs(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Oe(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Oe(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}se.prototype.bool=function(){return this.uint32()!==0};function dn(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}se.prototype.fixed32=function(){if(this.pos+4>this.len)throw Oe(this,4);return dn(this.buf,this.pos+=4)};se.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Oe(this,4);return dn(this.buf,this.pos+=4)|0};function ws(){if(this.pos+8>this.len)throw Oe(this,8);return new xs(dn(this.buf,this.pos+=4),dn(this.buf,this.pos+=4))}se.prototype.float=function(){if(this.pos+4>this.len)throw Oe(this,4);var t=Ge.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};se.prototype.double=function(){if(this.pos+8>this.len)throw Oe(this,4);var t=Ge.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};se.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Oe(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};se.prototype.string=function(){var t=this.bytes();return dc.read(t,0,t.length)};se.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Oe(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Oe(this);while(this.buf[this.pos++]&128);return this};se.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!=4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};se._configure=function(e){mi=e,se.create=bs(),mi._configure();var t=Ge.Long?"toLong":"toNumber";Ge.merge(se.prototype,{int64:function(){return bi.call(this)[t](!1)},uint64:function(){return bi.call(this)[t](!0)},sint64:function(){return bi.call(this).zzDecode()[t](!1)},fixed64:function(){return ws.call(this)[t](!0)},sfixed64:function(){return ws.call(this)[t](!1)}})}});var Cs=T((Ey,As)=>{"use strict";As.exports=Nt;var Es=wi();(Nt.prototype=Object.create(Es.prototype)).constructor=Nt;var Bs=gt();function Nt(e){Es.call(this,e)}Nt._configure=function(){Bs.Buffer&&(Nt.prototype._slice=Bs.Buffer.prototype.slice)};Nt.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Nt._configure()});var Is=T((By,Ts)=>{"use strict";Ts.exports=Ar;var Si=gt();(Ar.prototype=Object.create(Si.EventEmitter.prototype)).constructor=Ar;function Ar(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Si.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}Ar.prototype.rpcCall=function e(t,r,n,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return Si.asPromise(e,s,t,r,n,i);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(f,u){if(f)return s.emit("error",f,t),a(f);if(u===null){s.end(!0);return}if(!(u instanceof n))try{u=n[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(c){return s.emit("error",c,t),a(c)}return s.emit("data",u,t),a(null,u)})}catch(o){s.emit("error",o,t),setTimeout(function(){a(o)},0);return}};Ar.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Rs=T(_s=>{"use strict";var yc=_s;yc.Service=Is()});var Ps=T((Cy,Ds)=>{"use strict";Ds.exports={}});var Ns=T(ks=>{"use strict";var Ae=ks;Ae.build="minimal";Ae.Writer=xi();Ae.BufferWriter=vs();Ae.Reader=wi();Ae.BufferReader=Cs();Ae.util=gt();Ae.rpc=Rs();Ae.roots=Ps();Ae.configure=Ks;function Ks(){Ae.util._configure(),Ae.Writer._configure(Ae.BufferWriter),Ae.Reader._configure(Ae.BufferReader)}Ks()});var Ei=T((Iy,Ls)=>{"use strict";Ls.exports=Ns()});var gn=T((_y,qs)=>{"use strict";var Lt=Ei(),yn=Lt.Reader,Us=Lt.Writer,ve=Lt.util,Re=Lt.roots["libp2p-crypto-keys"]||(Lt.roots["libp2p-crypto-keys"]={});Re.KeyType=function(){var e={},t=Object.create(e);return t[e[0]="RSA"]=0,t[e[1]="Ed25519"]=1,t[e[2]="Secp256k1"]=2,t}();Re.PublicKey=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=ve.newBuffer([]),e.encode=function(r,n){return n||(n=Us.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},e.decode=function(r,n){r instanceof yn||(r=yn.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new Re.PublicKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw ve.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw ve.ProtocolError("missing required 'Data'",{instance:a});return a},e.fromObject=function(r){if(r instanceof Re.PublicKey)return r;var n=new Re.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?ve.base64.decode(r.Data,n.Data=ve.newBuffer(ve.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=ve.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Re.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?ve.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lt.util.toJSONOptions)},e}();Re.PrivateKey=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=ve.newBuffer([]),e.encode=function(r,n){return n||(n=Us.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},e.decode=function(r,n){r instanceof yn||(r=yn.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new Re.PrivateKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw ve.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw ve.ProtocolError("missing required 'Data'",{instance:a});return a},e.fromObject=function(r){if(r instanceof Re.PrivateKey)return r;var n=new Re.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?ve.base64.decode(r.Data,n.Data=ve.newBuffer(ve.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=ve.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Re.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?ve.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lt.util.toJSONOptions)},e}();qs.exports=Re});var Q=T((Ry,Os)=>{Os.exports={options:{usePureJavaScript:!1}}});var Vs=T((Dy,Ms)=>{var Bi={};Ms.exports=Bi;var Fs={};Bi.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=gc(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var f=0,u=e[i];f<o.length;++f)u+=o[f]<<8,o[f]=u%a,u=u/a|0;for(;u>0;)o.push(u%a),u=u/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join(`\r
`)}return n};Bi.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=Fs[t];if(!r){r=Fs[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var f=0,u=o;f<s.length;++f)u+=s[f]*i,s[f]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var c=0;e[c]===a&&c<e.length-1;++c)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function gc(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;o>0;)a.push(o%n),o=o/n|0}var f="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)f+=i;for(r=a.length-1;r>=0;--r)f+=t[a[r]];return f}});var ue=T((Py,Ws)=>{var zs=Q(),Hs=Vs(),d=Ws.exports=zs.util=zs.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){d.nextTick=process.nextTick,typeof setImmediate=="function"?d.setImmediate=setImmediate:d.setImmediate=d.nextTick;return}if(typeof setImmediate=="function"){d.setImmediate=function(){return setImmediate.apply(void 0,arguments)},d.nextTick=function(o){return setImmediate(o)};return}if(d.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===e){f.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(c){c()})}};var s=o,e="forge.setImmediate",t=[];d.setImmediate=function(f){t.push(f),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var f=t.slice();t.length=0,f.forEach(function(u){u()})}).observe(i,{attributes:!0});var a=d.setImmediate;d.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),a(f)):(t.push(f),t.length===1&&i.setAttribute("a",n=!n))}}d.nextTick=d.setImmediate})();d.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;d.globalScope=function(){return d.isNodejs?globalThis:typeof self=="undefined"?window:self}();d.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};d.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};d.isArrayBufferView=function(e){return e&&d.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Cr(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}d.ByteBuffer=Ai;function Ai(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(d.isArrayBuffer(e)||d.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Ai||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}d.ByteStringBuffer=Ai;var vc=4096;d.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>vc&&(this.data.substr(0,1),this._constructedStringLength=0)};d.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};d.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};d.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};d.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};d.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};d.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(d.encodeUtf8(e))};d.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};d.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};d.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};d.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};d.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};d.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};d.ByteStringBuffer.prototype.putInt=function(e,t){Cr(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};d.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};d.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};d.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};d.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};d.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};d.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};d.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};d.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};d.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};d.ByteStringBuffer.prototype.getInt=function(e){Cr(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};d.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};d.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};d.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};d.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};d.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};d.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};d.ByteStringBuffer.prototype.copy=function(){var e=d.createBuffer(this.data);return e.read=this.read,e};d.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};d.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};d.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};d.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};d.ByteStringBuffer.prototype.toString=function(){return d.decodeUtf8(this.bytes())};function xc(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=d.isArrayBuffer(e),n=d.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}d.DataBuffer=xc;d.DataBuffer.prototype.length=function(){return this.write-this.read};d.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};d.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};d.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};d.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};d.DataBuffer.prototype.putBytes=function(e,t){if(d.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(d.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof d.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&d.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof d.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=d.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=d.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=d.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=d.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=d.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};d.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};d.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};d.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};d.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};d.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};d.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};d.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};d.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};d.DataBuffer.prototype.putInt=function(e,t){Cr(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};d.DataBuffer.prototype.putSignedInt=function(e,t){return Cr(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};d.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};d.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};d.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};d.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};d.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};d.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};d.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};d.DataBuffer.prototype.getInt=function(e){Cr(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};d.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};d.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};d.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};d.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};d.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};d.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};d.DataBuffer.prototype.copy=function(){return new d.DataBuffer(this)};d.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};d.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};d.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};d.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};d.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return d.binary.raw.encode(t);if(e==="hex")return d.binary.hex.encode(t);if(e==="base64")return d.binary.base64.encode(t);if(e==="utf8")return d.text.utf8.decode(t);if(e==="utf16")return d.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};d.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=d.encodeUtf8(e)),new d.ByteBuffer(e)};d.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};d.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,o=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=a,a="",o=0),a+=String.fromCharCode(i),++o;return n+=a,n};d.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};d.bytesToHex=function(e){return d.createBuffer(e).toHex()};d.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",mt=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Gs="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";d.encode64=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),r+=xt.charAt(i>>2),r+=xt.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=xt.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":xt.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};d.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=mt[e.charCodeAt(s++)-43],n=mt[e.charCodeAt(s++)-43],i=mt[e.charCodeAt(s++)-43],a=mt[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};d.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};d.decodeUtf8=function(e){return decodeURIComponent(escape(e))};d.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Hs.encode,decode:Hs.decode}};d.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};d.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};d.binary.hex.encode=d.bytesToHex;d.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};d.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],r+=xt.charAt(i>>2),r+=xt.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=xt.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":xt.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};d.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,o,f=0,u=r;f<e.length;)i=mt[e.charCodeAt(f++)-43],a=mt[e.charCodeAt(f++)-43],s=mt[e.charCodeAt(f++)-43],o=mt[e.charCodeAt(f++)-43],n[u++]=i<<2|a>>4,s!==64&&(n[u++]=(a&15)<<4|s>>2,o!==64&&(n[u++]=(s&3)<<6|o));return t?u-r:n.subarray(0,u)};d.binary.base58.encode=function(e,t){return d.binary.baseN.encode(e,Gs,t)};d.binary.base58.decode=function(e,t){return d.binary.baseN.decode(e,Gs,t)};d.text={utf8:{},utf16:{}};d.text.utf8.encode=function(e,t,r){e=d.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};d.text.utf8.decode=function(e){return d.decodeUtf8(String.fromCharCode.apply(null,e))};d.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-r:n};d.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};d.deflate=function(e,t,r){if(t=d.decode64(e.deflate(d.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};d.inflate=function(e,t,r){var n=e.inflate(d.encode64(t)).rval;return n===null?null:d.decode64(n)};var Ci=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=d.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Ti=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(d.decode64(r))),r},mc=function(e,t,r,n){var i=Ti(e,t);i===null&&(i={}),i[r]=n,Ci(e,t,i)},bc=function(e,t,r){var n=Ti(e,t);return n!==null&&(n=r in n?n[r]:null),n},wc=function(e,t,r){var n=Ti(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),Ci(e,t,n)}},Sc=function(e,t){Ci(e,t,null)},vn=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(f){s=f}if(a)break}if(!a)throw s;return n};d.setItem=function(e,t,r,n,i){vn(mc,arguments,i)};d.getItem=function(e,t,r,n){return vn(bc,arguments,n)};d.removeItem=function(e,t,r,n){vn(wc,arguments,n)};d.clearItems=function(e,t,r){vn(Sc,arguments,r)};d.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=r===null?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var xn=null;d.getQueryVariables=function(e){var t=function(n){for(var i={},a=n.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("="),f,u;o>0?(f=a[s].substring(0,o),u=a[s].substring(o+1)):(f=a[s],u=null),f in i||(i[f]=[]),!(f in Object.prototype)&&u!==null&&i[f].push(unescape(u))}return i},r;return typeof e=="undefined"?(xn===null&&(typeof window!="undefined"&&window.location&&window.location.search?xn=t(window.location.search.substring(1)):xn={}),r=xn):r=t(e),r};d.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var i=t.split("/");i.length>0&&i[0]===""&&i.shift();var a=r===""?{}:d.getQueryVariables(r);return{pathString:t,queryString:r,path:i,query:a}};d.makeRequest=function(e){var t=d.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(n){return typeof n=="undefined"?t.path:t.path[n]},getQuery:function(n,i){var a;return typeof n=="undefined"?a=t.query:(a=t.query[n],a&&typeof i!="undefined"&&(a=a[i])),a},getQueryLast:function(n,i){var a,s=r.getQuery(n);return s?a=s[s.length-1]:a=i,a}};return r};d.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};d.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};d.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};d.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,o=n===void 0?".":n,f=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-u).toFixed(a).slice(2):"")};d.formatSize=function(e){return e>=1073741824?e=d.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=d.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=d.formatNumber(e/1024,0)+" KiB":e=d.formatNumber(e,0)+" bytes",e};d.bytesFromIP=function(e){return e.indexOf(".")!==-1?d.bytesFromIPv4(e):e.indexOf(":")!==-1?d.bytesFromIPv6(e):null};d.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=d.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};d.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=d.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=d.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};d.bytesToIP=function(e){return e.length===4?d.bytesToIPv4(e):e.length===16?d.bytesToIPv6(e):null};d.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};d.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=d.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=t.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var f=r[n];f.end-f.start>0&&(t.splice(f.start,f.end-f.start+1,""),f.start===0&&t.unshift(""),f.end===7&&t.push(""))}return t.join(":")};d.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in d&&!e.update)return t(null,d.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return d.cores=navigator.hardwareConcurrency,t(null,d.cores);if(typeof Worker=="undefined")return d.cores=1,t(null,d.cores);if(typeof Blob=="undefined")return d.cores=2,t(null,d.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,f){if(o===0){var u=Math.floor(s.reduce(function(c,h){return c+h},0)/s.length);return d.cores=Math.max(1,u),URL.revokeObjectURL(r),t(null,d.cores)}i(f,function(c,h){s.push(a(f,h)),n(s,o-1,f)})}function i(s,o){for(var f=[],u=[],c=0;c<s;++c){var h=new Worker(r);h.addEventListener("message",function(l){if(u.push(l.data),u.length===s){for(var y=0;y<s;++y)f[y].terminate();o(null,u)}}),f.push(h)}for(var c=0;c<s;++c)f[c].postMessage(c)}function a(s,o){for(var f=[],u=0;u<s;++u)for(var c=o[u],h=f[u]=[],l=0;l<s;++l)if(u!==l){var y=o[l];(c.st>y.st&&c.st<y.et||y.st>c.st&&y.st<c.et)&&h.push(l)}return f.reduce(function(p,g){return Math.max(p,g.length)},0)}}});var mn=T((Ky,js)=>{var Tr=Q();Tr.pki=Tr.pki||{};var Ii=js.exports=Tr.pki.oids=Tr.oids=Tr.oids||{};function B(e,t){Ii[e]=t,Ii[t]=e}function W(e,t){Ii[e]=t}B("1.2.840.113549.1.1.1","rsaEncryption");B("1.2.840.113549.1.1.4","md5WithRSAEncryption");B("1.2.840.113549.1.1.5","sha1WithRSAEncryption");B("1.2.840.113549.1.1.7","RSAES-OAEP");B("1.2.840.113549.1.1.8","mgf1");B("1.2.840.113549.1.1.9","pSpecified");B("1.2.840.113549.1.1.10","RSASSA-PSS");B("1.2.840.113549.1.1.11","sha256WithRSAEncryption");B("1.2.840.113549.1.1.12","sha384WithRSAEncryption");B("1.2.840.113549.1.1.13","sha512WithRSAEncryption");B("1.3.101.112","EdDSA25519");B("1.2.840.10040.4.3","dsa-with-sha1");B("1.3.14.3.2.7","desCBC");B("1.3.14.3.2.26","sha1");B("2.16.840.1.101.3.4.2.1","sha256");B("2.16.840.1.101.3.4.2.2","sha384");B("2.16.840.1.101.3.4.2.3","sha512");B("1.2.840.113549.2.5","md5");B("1.2.840.113549.1.7.1","data");B("1.2.840.113549.1.7.2","signedData");B("1.2.840.113549.1.7.3","envelopedData");B("1.2.840.113549.1.7.4","signedAndEnvelopedData");B("1.2.840.113549.1.7.5","digestedData");B("1.2.840.113549.1.7.6","encryptedData");B("1.2.840.113549.1.9.1","emailAddress");B("1.2.840.113549.1.9.2","unstructuredName");B("1.2.840.113549.1.9.3","contentType");B("1.2.840.113549.1.9.4","messageDigest");B("1.2.840.113549.1.9.5","signingTime");B("1.2.840.113549.1.9.6","counterSignature");B("1.2.840.113549.1.9.7","challengePassword");B("1.2.840.113549.1.9.8","unstructuredAddress");B("1.2.840.113549.1.9.14","extensionRequest");B("1.2.840.113549.1.9.20","friendlyName");B("1.2.840.113549.1.9.21","localKeyId");B("1.2.840.113549.1.9.22.1","x509Certificate");B("1.2.840.113549.1.12.10.1.1","keyBag");B("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");B("1.2.840.113549.1.12.10.1.3","certBag");B("1.2.840.113549.1.12.10.1.4","crlBag");B("1.2.840.113549.1.12.10.1.5","secretBag");B("1.2.840.113549.1.12.10.1.6","safeContentsBag");B("1.2.840.113549.1.5.13","pkcs5PBES2");B("1.2.840.113549.1.5.12","pkcs5PBKDF2");B("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");B("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");B("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");B("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");B("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");B("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");B("1.2.840.113549.2.7","hmacWithSHA1");B("1.2.840.113549.2.8","hmacWithSHA224");B("1.2.840.113549.2.9","hmacWithSHA256");B("1.2.840.113549.2.10","hmacWithSHA384");B("1.2.840.113549.2.11","hmacWithSHA512");B("1.2.840.113549.3.7","des-EDE3-CBC");B("2.16.840.1.101.3.4.1.2","aes128-CBC");B("2.16.840.1.101.3.4.1.22","aes192-CBC");B("2.16.840.1.101.3.4.1.42","aes256-CBC");B("2.5.4.3","commonName");B("2.5.4.5","serialName");B("2.5.4.6","countryName");B("2.5.4.7","localityName");B("2.5.4.8","stateOrProvinceName");B("2.5.4.9","streetAddress");B("2.5.4.10","organizationName");B("2.5.4.11","organizationalUnitName");B("2.5.4.13","description");B("2.5.4.15","businessCategory");B("2.5.4.17","postalCode");B("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");B("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");B("2.16.840.1.113730.1.1","nsCertType");B("2.16.840.1.113730.1.13","nsComment");W("2.5.29.1","authorityKeyIdentifier");W("2.5.29.2","keyAttributes");W("2.5.29.3","certificatePolicies");W("2.5.29.4","keyUsageRestriction");W("2.5.29.5","policyMapping");W("2.5.29.6","subtreesConstraint");W("2.5.29.7","subjectAltName");W("2.5.29.8","issuerAltName");W("2.5.29.9","subjectDirectoryAttributes");W("2.5.29.10","basicConstraints");W("2.5.29.11","nameConstraints");W("2.5.29.12","policyConstraints");W("2.5.29.13","basicConstraints");B("2.5.29.14","subjectKeyIdentifier");B("2.5.29.15","keyUsage");W("2.5.29.16","privateKeyUsagePeriod");B("2.5.29.17","subjectAltName");B("2.5.29.18","issuerAltName");B("2.5.29.19","basicConstraints");W("2.5.29.20","cRLNumber");W("2.5.29.21","cRLReason");W("2.5.29.22","expirationDate");W("2.5.29.23","instructionCode");W("2.5.29.24","invalidityDate");W("2.5.29.25","cRLDistributionPoints");W("2.5.29.26","issuingDistributionPoint");W("2.5.29.27","deltaCRLIndicator");W("2.5.29.28","issuingDistributionPoint");W("2.5.29.29","certificateIssuer");W("2.5.29.30","nameConstraints");B("2.5.29.31","cRLDistributionPoints");B("2.5.29.32","certificatePolicies");W("2.5.29.33","policyMappings");W("2.5.29.34","policyConstraints");B("2.5.29.35","authorityKeyIdentifier");W("2.5.29.36","policyConstraints");B("2.5.29.37","extKeyUsage");W("2.5.29.46","freshestCRL");W("2.5.29.54","inhibitAnyPolicy");B("1.3.6.1.4.1.11129.2.4.2","timestampList");B("1.3.6.1.5.5.7.1.1","authorityInfoAccess");B("1.3.6.1.5.5.7.3.1","serverAuth");B("1.3.6.1.5.5.7.3.2","clientAuth");B("1.3.6.1.5.5.7.3.3","codeSigning");B("1.3.6.1.5.5.7.3.4","emailProtection");B("1.3.6.1.5.5.7.3.8","timeStamping")});var _r=T((ky,Ys)=>{var ee=Q();ue();mn();var C=Ys.exports=ee.asn1=ee.asn1||{};C.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};C.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};C.create=function(e,t,r,n,i){if(ee.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var o={tagClass:e,type:t,constructed:r,composed:r||ee.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=C.copy(o)),o};C.copy=function(e,t){var r;if(ee.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(C.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:C.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};C.equals=function(e,t,r){if(ee.util.isArray(e)){if(!ee.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!C.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&C.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};C.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Ir(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var Ec=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Ir(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};C.fromDer=function(e,t){return t===void 0&&(t={strict:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=ee.util.createBuffer(e)),bn(e,e.length(),0,t)};function bn(e,t,r,n){var i;Ir(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var f=Ec(e,t);if(t-=i-e.length(),f!==void 0&&f>t){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=f,u}f=t}var c,h,l=(a&32)==32;if(l)if(c=[],f===void 0)for(;;){if(Ir(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),c.push(bn(e,t,r+1,n)),t-=i-e.length()}else for(;f>0;)i=e.length(),c.push(bn(e,f,r+1,n)),t-=i-e.length(),f-=i-e.length();if(c===void 0&&s===C.Class.UNIVERSAL&&o===C.Type.BITSTRING&&(h=e.bytes(f)),c===void 0&&n.decodeBitStrings&&s===C.Class.UNIVERSAL&&o===C.Type.BITSTRING&&f>1){var y=e.read,p=t,g=0;if(o===C.Type.BITSTRING&&(Ir(e,t,1),g=e.getByte(),t--),g===0)try{i=e.length();var x={verbose:n.verbose,strict:!0,decodeBitStrings:!0},b=bn(e,t,r+1,x),E=i-e.length();t-=E,o==C.Type.BITSTRING&&E++;var A=b.tagClass;E===f&&(A===C.Class.UNIVERSAL||A===C.Class.CONTEXT_SPECIFIC)&&(c=[b])}catch(_){}c===void 0&&(e.read=y,t=p)}if(c===void 0){if(f===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=t}if(o===C.Type.BMPSTRING)for(c="";f>0;f-=2)Ir(e,t,2),c+=String.fromCharCode(e.getInt16()),t-=2;else c=e.getBytes(f)}var k=h===void 0?null:{bitStringContents:h};return C.create(s,o,l,c,k)}C.toDer=function(e){var t=ee.util.createBuffer(),r=e.tagClass|e.type,n=ee.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=C.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(C.toDer(e.value[a]))}else if(e.type===C.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===C.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t};C.oidToDer=function(e){var t=e.split("."),r=ee.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,o=2;o<t.length;++o){n=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var f=i.length-1;f>=0;--f)r.putByte(i[f])}return r};C.derToOid=function(e){var t;typeof e=="string"&&(e=ee.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};C.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var f=e.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,0),u&&(f=e.charAt(u),f==="+"||f==="-")){var c=parseInt(e.substr(u+1,2),10),h=parseInt(e.substr(u+4,2),10),l=c*60+h;l*=6e4,f==="+"?t.setTime(+t-l):t.setTime(+t+l)}return t};C.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),f=0,u=0,c=!1;e.charAt(e.length-1)==="Z"&&(c=!0);var h=e.length-5,l=e.charAt(h);if(l==="+"||l==="-"){var y=parseInt(e.substr(h+1,2),10),p=parseInt(e.substr(h+4,2),10);u=y*60+p,u*=6e4,l==="+"&&(u*=-1),c=!0}return e.charAt(14)==="."&&(f=parseFloat(e.substr(14),10)*1e3),c?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,f),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(a,s,o,f)),t};C.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};C.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};C.integerToDer=function(e){var t=ee.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};C.derToInteger=function(e){typeof e=="string"&&(e=ee.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};C.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&ee.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=C.validate(e.value[a],t.value[s],r,n),i?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var f=e.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var $s=/[^\\u0000-\\u00ff]/;C.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case C.Class.UNIVERSAL:n+="Universal:";break;case C.Class.APPLICATION:n+="Application:";break;case C.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case C.Class.PRIVATE:n+="Private:";break}if(e.tagClass===C.Class.UNIVERSAL)switch(n+=e.type,e.type){case C.Type.NONE:n+=" (None)";break;case C.Type.BOOLEAN:n+=" (Boolean)";break;case C.Type.INTEGER:n+=" (Integer)";break;case C.Type.BITSTRING:n+=" (Bit string)";break;case C.Type.OCTETSTRING:n+=" (Octet string)";break;case C.Type.NULL:n+=" (Null)";break;case C.Type.OID:n+=" (Object Identifier)";break;case C.Type.ODESC:n+=" (Object Descriptor)";break;case C.Type.EXTERNAL:n+=" (External or Instance of)";break;case C.Type.REAL:n+=" (Real)";break;case C.Type.ENUMERATED:n+=" (Enumerated)";break;case C.Type.EMBEDDED:n+=" (Embedded PDV)";break;case C.Type.UTF8:n+=" (UTF8)";break;case C.Type.ROID:n+=" (Relative Object Identifier)";break;case C.Type.SEQUENCE:n+=" (Sequence)";break;case C.Type.SET:n+=" (Set)";break;case C.Type.PRINTABLESTRING:n+=" (Printable String)";break;case C.Type.IA5String:n+=" (IA5String (ASCII))";break;case C.Type.UTCTIME:n+=" (UTC time)";break;case C.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case C.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=C.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(o+=","));n+=i+"Sub values: "+s+o}else{if(n+=i+"Value: ",e.type===C.Type.OID){var f=C.derToOid(e.value);n+=f,ee.pki&&ee.pki.oids&&f in ee.pki.oids&&(n+=" ("+ee.pki.oids[f]+") ")}if(e.type===C.Type.INTEGER)try{n+=C.derToInteger(e.value)}catch(c){n+="0x"+ee.util.bytesToHex(e.value)}else if(e.type===C.Type.BITSTRING){if(e.value.length>1?n+="0x"+ee.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else e.type===C.Type.OCTETSTRING?($s.test(e.value)||(n+="("+e.value+") "),n+="0x"+ee.util.bytesToHex(e.value)):e.type===C.Type.UTF8?n+=ee.util.decodeUtf8(e.value):e.type===C.Type.PRINTABLESTRING||e.type===C.Type.IA5String?n+=e.value:$s.test(e.value)?n+="0x"+ee.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Ri=T((Ny,Qs)=>{var le=Q();ue();Qs.exports=le.cipher=le.cipher||{};le.cipher.algorithms=le.cipher.algorithms||{};le.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=le.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new le.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};le.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=le.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new le.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};le.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),le.cipher.algorithms[e]=t};le.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in le.cipher.algorithms?le.cipher.algorithms[e]:null};var _i=le.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};_i.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=le.util.createBuffer(),this.output=e.output||le.util.createBuffer(),this.mode.start(t)};_i.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};_i.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Pi=T((Ly,Zs)=>{var pe=Q();ue();pe.cipher=pe.cipher||{};var q=Zs.exports=pe.cipher.modes=pe.cipher.modes||{};q.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};q.ecb.prototype.start=function(e){};q.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};q.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};q.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};q.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};q.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};q.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=wn(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};q.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};q.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};q.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};q.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};q.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=pe.util.createBuffer(),this._partialBytes=0};q.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=wn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};q.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};q.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};q.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=pe.util.createBuffer(),this._partialBytes=0};q.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=wn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};q.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};q.ofb.prototype.decrypt=q.ofb.prototype.encrypt;q.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=pe.util.createBuffer(),this._partialBytes=0};q.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=wn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};q.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Sn(this._inBlock)};q.ctr.prototype.decrypt=q.ctr.prototype.encrypt;q.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=pe.util.createBuffer(),this._partialBytes=0,this._R=3774873600};q.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=pe.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=pe.util.createBuffer(e.additionalData):r=pe.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=pe.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Di(n*8)))}this._inBlock=this._j0.slice(0),Sn(this._inBlock),this._partialBytes=0,r=pe.util.createBuffer(r),this._aDataLength=Di(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};q.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Sn(this._inBlock)};q.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Sn(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};q.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=pe.util.createBuffer();var n=this._aDataLength.concat(Di(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};q.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};q.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};q.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};q.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};q.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],f=s/n|0,u=(n-1-s%n)*t;o[f]=1<<t-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};q.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],f=i[s];i[a+s]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var u=i[a^n];i[a]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function wn(e,t){if(typeof e=="string"&&(e=pe.util.createBuffer(e)),pe.util.isArray(e)&&e.length>4){var r=e;e=pe.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!pe.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function Sn(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Di(e){return[e/4294967296|0,e&4294967295]}});var Li=T((Uy,to)=>{var X=Q();Ri();Pi();ue();to.exports=X.aes=X.aes||{};X.aes.startEncrypting=function(e,t,r,n){var i=En({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};X.aes.createEncryptionCipher=function(e,t){return En({key:e,output:null,decrypt:!1,mode:t})};X.aes.startDecrypting=function(e,t,r,n){var i=En({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};X.aes.createDecryptionCipher=function(e,t){return En({key:e,output:null,decrypt:!0,mode:t})};X.aes.Algorithm=function(e,t){Ki||Js();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Ni(r._w,n,i,!1)},decrypt:function(n,i){return Ni(r._w,n,i,!0)}}}),r._init=!1};X.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=X.util.createBuffer(t);else if(X.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=X.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!X.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!X.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=eo(t,e.decrypt&&!s),this._init=!0}};X.aes._expandKey=function(e,t){return Ki||Js(),eo(e,t)};X.aes._updateBlock=Ni;tr("AES-ECB",X.cipher.modes.ecb);tr("AES-CBC",X.cipher.modes.cbc);tr("AES-CFB",X.cipher.modes.cfb);tr("AES-OFB",X.cipher.modes.ofb);tr("AES-CTR",X.cipher.modes.ctr);tr("AES-GCM",X.cipher.modes.gcm);function tr(e,t){var r=function(){return new X.aes.Algorithm(e,t)};X.cipher.registerAlgorithm(e,r)}var Ki=!1,rr=4,we,ki,Xs,Ut,Fe;function Js(){Ki=!0,Xs=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;we=new Array(256),ki=new Array(256),Ut=new Array(4),Fe=new Array(4);for(var t=0;t<4;++t)Ut[t]=new Array(256),Fe[t]=new Array(256);for(var r=0,n=0,i,a,s,o,f,u,c,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,we[r]=o,ki[o]=r,f=e[o],i=e[r],a=e[i],s=e[a],u=f<<24^o<<16^o<<8^(o^f),c=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Ut[h][r]=u,Fe[h][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function eo(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,o=rr*s,f=a;f<o;++f)n=r[f-1],f%a==0?(n=we[n>>>16&255]<<24^we[n>>>8&255]<<16^we[n&255]<<8^we[n>>>24]^Xs[i]<<24,i++):a>6&&f%a==4&&(n=we[n>>>24]<<24^we[n>>>16&255]<<16^we[n>>>8&255]<<8^we[n&255]),r[f]=r[f-a]^n;if(t){var u,c=Fe[0],h=Fe[1],l=Fe[2],y=Fe[3],p=r.slice(0);o=r.length;for(var f=0,g=o-rr;f<o;f+=rr,g-=rr)if(f===0||f===o-rr)p[f]=r[g],p[f+1]=r[g+3],p[f+2]=r[g+2],p[f+3]=r[g+1];else for(var x=0;x<rr;++x)u=r[g+x],p[f+(3&-x)]=c[we[u>>>24]]^h[we[u>>>16&255]]^l[we[u>>>8&255]]^y[we[u&255]];r=p}return r}function Ni(e,t,r,n){var i=e.length/4-1,a,s,o,f,u;n?(a=Fe[0],s=Fe[1],o=Fe[2],f=Fe[3],u=ki):(a=Ut[0],s=Ut[1],o=Ut[2],f=Ut[3],u=we);var c,h,l,y,p,g,x;c=t[0]^e[0],h=t[n?3:1]^e[1],l=t[2]^e[2],y=t[n?1:3]^e[3];for(var b=3,E=1;E<i;++E)p=a[c>>>24]^s[h>>>16&255]^o[l>>>8&255]^f[y&255]^e[++b],g=a[h>>>24]^s[l>>>16&255]^o[y>>>8&255]^f[c&255]^e[++b],x=a[l>>>24]^s[y>>>16&255]^o[c>>>8&255]^f[h&255]^e[++b],y=a[y>>>24]^s[c>>>16&255]^o[h>>>8&255]^f[l&255]^e[++b],c=p,h=g,l=x;r[0]=u[c>>>24]<<24^u[h>>>16&255]<<16^u[l>>>8&255]<<8^u[y&255]^e[++b],r[n?3:1]=u[h>>>24]<<24^u[l>>>16&255]<<16^u[y>>>8&255]<<8^u[c&255]^e[++b],r[2]=u[l>>>24]<<24^u[y>>>16&255]<<16^u[c>>>8&255]<<8^u[h&255]^e[++b],r[n?1:3]=u[y>>>24]<<24^u[c>>>16&255]<<16^u[h>>>8&255]<<8^u[l&255]^e[++b]}function En(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=X.cipher.createDecipher(r,e.key):n=X.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof X.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var io=T((qy,no)=>{var te=Q();Ri();Pi();ue();no.exports=te.des=te.des||{};te.des.startEncrypting=function(e,t,r,n){var i=Bn({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};te.des.createEncryptionCipher=function(e,t){return Bn({key:e,output:null,decrypt:!1,mode:t})};te.des.startDecrypting=function(e,t,r,n){var i=Bn({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};te.des.createDecryptionCipher=function(e,t){return Bn({key:e,output:null,decrypt:!0,mode:t})};te.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return ro(r._keys,n,i,!1)},decrypt:function(n,i){return ro(r._keys,n,i,!0)}}}),r._init=!1};te.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=te.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Pc(t),this._init=!0}};We("DES-ECB",te.cipher.modes.ecb);We("DES-CBC",te.cipher.modes.cbc);We("DES-CFB",te.cipher.modes.cfb);We("DES-OFB",te.cipher.modes.ofb);We("DES-CTR",te.cipher.modes.ctr);We("3DES-ECB",te.cipher.modes.ecb);We("3DES-CBC",te.cipher.modes.cbc);We("3DES-CFB",te.cipher.modes.cfb);We("3DES-OFB",te.cipher.modes.ofb);We("3DES-CTR",te.cipher.modes.ctr);function We(e,t){var r=function(){return new te.des.Algorithm(e,t)};te.cipher.registerAlgorithm(e,r)}var Bc=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Ac=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Cc=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Tc=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Ic=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],_c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Rc=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Dc=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Pc(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,x=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,A,k=0;k<g;k++){var _=e.getInt32(),R=e.getInt32();A=(_>>>4^R)&252645135,R^=A,_^=A<<4,A=(R>>>-16^_)&65535,_^=A,R^=A<<-16,A=(_>>>2^R)&858993459,R^=A,_^=A<<2,A=(R>>>-16^_)&65535,_^=A,R^=A<<-16,A=(_>>>1^R)&1431655765,R^=A,_^=A<<1,A=(R>>>8^_)&16711935,_^=A,R^=A<<8,A=(_>>>1^R)&1431655765,R^=A,_^=A<<1,A=_<<8|R>>>20&240,_=R<<24|R<<8&16711680|R>>>8&65280|R>>>24&240,R=A;for(var O=0;O<b.length;++O){b[O]?(_=_<<2|_>>>26,R=R<<2|R>>>26):(_=_<<1|_>>>27,R=R<<1|R>>>27),_&=-15,R&=-15;var G=t[_>>>28]|r[_>>>24&15]|n[_>>>20&15]|i[_>>>16&15]|a[_>>>12&15]|s[_>>>8&15]|o[_>>>4&15],ye=f[R>>>28]|u[R>>>24&15]|c[R>>>20&15]|h[R>>>16&15]|l[R>>>12&15]|y[R>>>8&15]|p[R>>>4&15];A=(ye>>>16^G)&65535,x[E++]=G^A,x[E++]=ye^A<<16}}return x}function ro(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],f=t[1];s=(o>>>4^f)&252645135,f^=s,o^=s<<4,s=(o>>>16^f)&65535,f^=s,o^=s<<16,s=(f>>>2^o)&858993459,o^=s,f^=s<<2,s=(f>>>8^o)&16711935,o^=s,f^=s<<8,s=(o>>>1^f)&1431655765,f^=s,o^=s<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<i;u+=3){for(var c=a[u+1],h=a[u+2],l=a[u];l!=c;l+=h){var y=f^e[l],p=(f>>>4|f<<28)^e[l+1];s=o,o=f,f=s^(Ac[y>>>24&63]|Tc[y>>>16&63]|_c[y>>>8&63]|Dc[y&63]|Bc[p>>>24&63]|Cc[p>>>16&63]|Ic[p>>>8&63]|Rc[p&63])}s=o,o=f,f=s}o=o>>>1|o<<31,f=f>>>1|f<<31,s=(o>>>1^f)&1431655765,f^=s,o^=s<<1,s=(f>>>8^o)&16711935,o^=s,f^=s<<8,s=(f>>>2^o)&858993459,o^=s,f^=s<<2,s=(o>>>16^f)&65535,f^=s,o^=s<<16,s=(o>>>4^f)&252645135,f^=s,o^=s<<4,r[0]=o,r[1]=f}function Bn(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=te.cipher.createDecipher(r,e.key):n=te.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof te.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var qt=T((Oy,ao)=>{var An=Q();ao.exports=An.md=An.md||{};An.md.algorithms=An.md.algorithms||{}});var oo=T((Fy,so)=>{var st=Q();qt();ue();var Kc=so.exports=st.hmac=st.hmac||{};Kc.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in st.md.algorithms)t=st.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=st.util.createBuffer(s);else if(st.util.isArray(s)){var o=s;s=st.util.createBuffer();for(var f=0;f<o.length;++f)s.putByte(o[f])}var u=s.length();u>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=st.util.createBuffer(),n=st.util.createBuffer(),u=s.length();for(var f=0;f<u;++f){var o=s.at(f);r.putByte(54^o),n.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,f=0;f<o;++f)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var nr=T(()=>{});var fo=T((zy,uo)=>{var Se=Q();oo();qt();ue();var kc=Se.pkcs5=Se.pkcs5||{},ot;Se.util.isNodejs&&!Se.options.usePureJavaScript&&(ot=nr());uo.exports=Se.pbkdf2=kc.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),Se.util.isNodejs&&!Se.options.usePureJavaScript&&ot.pbkdf2&&(i===null||typeof i!="object")&&(ot.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?ot.pbkdf2Sync.length===4?ot.pbkdf2(e,t,r,n,function(A,k){if(A)return a(A);a(null,k.toString("binary"))}):ot.pbkdf2(e,t,r,n,i,function(A,k){if(A)return a(A);a(null,k.toString("binary"))}):ot.pbkdf2Sync.length===4?ot.pbkdf2Sync(e,t,r,n).toString("binary"):ot.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Se.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Se.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var f=Math.ceil(n/s),u=n-(f-1)*s,c=Se.hmac.create();c.start(i,e);var h="",l,y,p;if(!a){for(var g=1;g<=f;++g){c.start(null,null),c.update(t),c.update(Se.util.int32ToBytes(g)),l=p=c.digest().getBytes();for(var x=2;x<=r;++x)c.start(null,null),c.update(p),y=c.digest().getBytes(),l=Se.util.xorBytes(l,y,s),p=y;h+=g<f?l:l.substr(0,u)}return h}var g=1,x;function b(){if(g>f)return a(null,h);c.start(null,null),c.update(t),c.update(Se.util.int32ToBytes(g)),l=p=c.digest().getBytes(),x=2,E()}function E(){if(x<=r)return c.start(null,null),c.update(p),y=c.digest().getBytes(),l=Se.util.xorBytes(l,y,s),p=y,++x,Se.util.setImmediate(E);h+=g<f?l:l.substr(0,u),++g,b()}b()}});var lo=T((Hy,ho)=>{var Cn=Q();ue();var co=ho.exports=Cn.pem=Cn.pem||{};co.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=Tn(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=Tn(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=Tn(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=Tn(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Cn.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};co.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s={type:a[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:Cn.util.decode64(a[3])};if(t.push(s),!!a[2]){for(var o=a[2].split(i),f=0;a&&f<o.length;){for(var u=o[f].replace(/\s+$/,""),c=f+1;c<o.length;++c){var h=o[c];if(!/\s/.test(h[0]))break;u+=h,f=c}if(a=u.match(n),a){for(var l={name:a[1],values:[]},y=a[2].split(","),p=0;p<y.length;++p)l.values.push(Nc(y[p]));if(s.procType)if(!s.contentDomain&&l.name==="Content-Domain")s.contentDomain=y[0]||"";else if(!s.dekInfo&&l.name==="DEK-Info"){if(l.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:y[0],parameters:y[1]||null}}else s.headers.push(l);else{if(l.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(l.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:y[0],type:y[1]}}}++f}if(s.procType==="ENCRYPTED"&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Tn(e){for(var t=e.name+": ",r=[],n=function(f,u){return" "+u},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function Nc(e){return e.replace(/^\s+/,"")}});var mo=T((Gy,xo)=>{var je=Q();qt();ue();var po=xo.exports=je.sha256=je.sha256||{};je.md.sha256=je.md.algorithms.sha256=po;po.create=function(){yo||Lc();var e=null,t=je.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=je.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=je.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),vo(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=je.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Ui.substr(0,n.blockLength-s));for(var o,f,u=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};vo(h,r,i);var l=je.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},n};var Ui=null,yo=!1,go=null;function Lc(){Ui=String.fromCharCode(128),Ui+=je.util.fillString(String.fromCharCode(0),64),go=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],yo=!0}function vo(e,t,r){for(var n,i,a,s,o,f,u,c,h,l,y,p,g,x,b,E=r.length();E>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=t[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(c=e.h0,h=e.h1,l=e.h2,y=e.h3,p=e.h4,g=e.h5,x=e.h6,b=e.h7,u=0;u<64;++u)s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=x^p&(g^x),a=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|l&(c^h),n=b+s+o+go[u]+t[u],i=a+f,b=x,x=g,g=p,p=y+n>>>0,y=l,l=h,h=c,c=n+i>>>0;e.h0=e.h0+c|0,e.h1=e.h1+h|0,e.h2=e.h2+l|0,e.h3=e.h3+y|0,e.h4=e.h4+p|0,e.h5=e.h5+g|0,e.h6=e.h6+x|0,e.h7=e.h7+b|0,E-=64}}});var wo=T((Wy,bo)=>{var $e=Q();ue();var In=null;$e.util.isNodejs&&!$e.options.usePureJavaScript&&!process.versions["node-webkit"]&&(In=nr());var Uc=bo.exports=$e.prng=$e.prng||{};Uc.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(u,c){if(!c)return t.generateSync(u);var h=t.plugin.cipher,l=t.plugin.increment,y=t.plugin.formatKey,p=t.plugin.formatSeed,g=$e.util.createBuffer();t.key=null,x();function x(b){if(b)return c(b);if(g.length()>=u)return c(null,g.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return $e.util.nextTick(function(){a(x)});var E=h(t.key,t.seed);t.generated+=E.length,g.putBytes(E),t.key=y(h(t.key,l(t.seed))),t.seed=p(h(t.key,t.seed)),$e.util.setImmediate(x)}},t.generateSync=function(u){var c=t.plugin.cipher,h=t.plugin.increment,l=t.plugin.formatKey,y=t.plugin.formatSeed;t.key=null;for(var p=$e.util.createBuffer();p.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&s();var g=c(t.key,t.seed);t.generated+=g.length,p.putBytes(g),t.key=l(c(t.key,h(t.seed))),t.seed=y(c(t.key,t.seed))}return p.getBytes(u)};function a(u){if(t.pools[0].messageLength>=32)return o(),u();var c=32-t.pools[0].messageLength<<5;t.seedFile(c,function(h,l){if(h)return u(h);t.collect(l),o(),u()})}function s(){if(t.pools[0].messageLength>=32)return o();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var c=1,h=0;h<32;++h)t.reseeds%c==0&&(u.update(t.pools[h].digest().getBytes()),t.pools[h].start()),c=c<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var l=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(l),t.generated=0}function f(u){var c=null,h=$e.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(c=function(_){return l.getRandomValues(_)});var y=$e.util.createBuffer();if(c)for(;y.length()<u;){var p=Math.max(1,Math.min(u-y.length(),65536)/4),g=new Uint32Array(Math.floor(p));try{c(g);for(var x=0;x<g.length;++x)y.putInt32(g[x])}catch(_){if(!(typeof QuotaExceededError!="undefined"&&_ instanceof QuotaExceededError))throw _}}if(y.length()<u)for(var b,E,A,k=Math.floor(Math.random()*65536);y.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var x=0;x<3;++x)A=k>>>(x<<3),A^=Math.floor(Math.random()*256),y.putByte(String.fromCharCode(A&255))}return y.getBytes(u)}return In?(t.seedFile=function(u,c){In.randomBytes(u,function(h,l){if(h)return c(h);c(null,l.toString())})},t.seedFileSync=function(u){return In.randomBytes(u).toString()}):(t.seedFile=function(u,c){try{c(null,f(u))}catch(h){c(h)}},t.seedFileSync=f),t.collect=function(u){for(var c=u.length,h=0;h<c;++h)t.pools[t.pool].update(u.substr(h,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,c){for(var h="",l=0;l<c;l+=8)h+=String.fromCharCode(u>>l&255);t.collect(h)},t.registerWorker=function(u){if(u===self)t.seedFile=function(h,l){function y(p){var g=p.data;g.forge&&g.forge.prng&&(self.removeEventListener("message",y),l(g.forge.prng.err,g.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:h}}})};else{var c=function(h){var l=h.data;l.forge&&l.forge.prng&&t.seedFile(l.forge.prng.needed,function(y,p){u.postMessage({forge:{prng:{err:y,bytes:p}}})})};u.addEventListener("message",c)}},t}});var Rr=T((jy,qi)=>{var de=Q();Li();mo();wo();ue();(function(){if(de.random&&de.random.getBytes){qi.exports=de.random;return}(function(e){var t={},r=new Array(4),n=de.util.createBuffer();t.formatKey=function(h){var l=de.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),de.aes._expandKey(h,!1)},t.formatSeed=function(h){var l=de.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},t.cipher=function(h,l){return de.aes._updateBlock(h,l,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(h){return++h[3],h},t.md=de.md.sha256;function i(){var h=de.prng.create(t);return h.getBytes=function(l,y){return h.generate(l,y)},h.getBytesSync=function(l){return h.generate(l)},h}var a=i(),s=null,o=de.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(s=function(h){return f.getRandomValues(h)}),de.options.usePureJavaScript||!de.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(h){}a.collect(u),u=null}e&&(e().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),e().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!de.random)de.random=a;else for(var c in a)de.random[c]=a[c];de.random.createInstance=i,qi.exports=de.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Ao=T(($y,Bo)=>{var Ce=Q();ue();var Oi=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],So=[1,2,3,5],qc=function(e,t){return e<<t&65535|(e&65535)>>16-t},Oc=function(e,t){return(e&65535)>>t|e<<16-t&65535};Bo.exports=Ce.rc2=Ce.rc2||{};Ce.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ce.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(Oi[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-a,Oi[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,Oi[r.at(o+1)^r.at(o+a)]);return r};var Eo=function(e,t,r){var n=!1,i=null,a=null,s=null,o,f,u,c,h=[];for(e=Ce.rc2.expandKey(e,t),u=0;u<64;u++)h.push(e.getInt16Le());r?(o=function(p){for(u=0;u<4;u++)p[u]+=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=qc(p[u],So[u]),c++},f=function(p){for(u=0;u<4;u++)p[u]+=h[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=Oc(p[u],So[u]),p[u]-=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},f=function(p){for(u=3;u>=0;u--)p[u]-=h[p[(u+3)%4]&63]});var l=function(p){var g=[];for(u=0;u<4;u++){var x=i.getInt16Le();s!==null&&(r?x^=s.getInt16Le():s.putInt16Le(x)),g.push(x&65535)}c=r?0:63;for(var b=0;b<p.length;b++)for(var E=0;E<p[b][0];E++)p[b][1](g);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(g[u]):g[u]^=s.getInt16Le()),a.putInt16Le(g[u])},y=null;return y={start:function(p,g){p&&typeof p=="string"&&(p=Ce.util.createBuffer(p)),n=!1,i=Ce.util.createBuffer(),a=g||new Ce.util.createBuffer,s=p,y.output=a},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)l([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(p){var g=!0;if(r)if(p)g=p(8,i,!r);else{var x=i.length()===8?8:8-i.length();i.fillWithByte(x,x)}if(g&&(n=!0,y.update()),!r&&(g=i.length()===0,g))if(p)g=p(8,a,!r);else{var b=a.length(),E=a.at(b-1);E>b?g=!1:a.truncate(E)}return g}},y};Ce.rc2.startEncrypting=function(e,t,r){var n=Ce.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ce.rc2.createEncryptionCipher=function(e,t){return Eo(e,t,!0)};Ce.rc2.startDecrypting=function(e,t,r){var n=Ce.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ce.rc2.createDecryptionCipher=function(e,t){return Eo(e,t,!1)}});var Dn=T((Yy,Ko)=>{var Fi=Q();Ko.exports=Fi.jsbn=Fi.jsbn||{};var ut,Fc=244837814094590,Co=(Fc&16777215)==15715070;function w(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Fi.jsbn.BigInteger=w;function V(){return new w(null)}function Mc(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function Vc(e,t,r,n,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var f=this.data[e]&32767,u=this.data[e++]>>15,c=o*f+u*s;f=s*f+((c&32767)<<15)+r.data[n]+(i&1073741823),i=(f>>>30)+(c>>>15)+o*u+(i>>>30),r.data[n++]=f&1073741823}return i}function To(e,t,r,n,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var f=this.data[e]&16383,u=this.data[e++]>>14,c=o*f+u*s;f=s*f+((c&16383)<<14)+r.data[n]+i,i=(f>>28)+(c>>14)+o*u,r.data[n++]=f&268435455}return i}typeof navigator=="undefined"?(w.prototype.am=To,ut=28):Co&&navigator.appName=="Microsoft Internet Explorer"?(w.prototype.am=Vc,ut=30):Co&&navigator.appName!="Netscape"?(w.prototype.am=Mc,ut=26):(w.prototype.am=To,ut=28);w.prototype.DB=ut;w.prototype.DM=(1<<ut)-1;w.prototype.DV=1<<ut;var Mi=52;w.prototype.FV=Math.pow(2,Mi);w.prototype.F1=Mi-ut;w.prototype.F2=2*ut-Mi;var zc="0123456789abcdefghijklmnopqrstuvwxyz",_n=new Array,ir,De;ir="0".charCodeAt(0);for(De=0;De<=9;++De)_n[ir++]=De;ir="a".charCodeAt(0);for(De=10;De<36;++De)_n[ir++]=De;ir="A".charCodeAt(0);for(De=10;De<36;++De)_n[ir++]=De;function Io(e){return zc.charAt(e)}function _o(e,t){var r=_n[e.charCodeAt(t)];return r??-1}function Hc(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Gc(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function bt(e){var t=V();return t.fromInt(e),t}function Wc(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:_o(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&w.ZERO.subTo(this,this)}function jc(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function $c(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(i=!0,a=Io(n));s>=0;)o<t?(n=(this.data[s]&(1<<o)-1)<<t-o,n|=this.data[--s]>>(o+=this.DB-t)):(n=this.data[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=Io(n));return i?a:"0"}function Yc(){var e=V();return w.ZERO.subTo(this,e),e}function Qc(){return this.s<0?this.negate():this}function Zc(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Rn(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Xc(){return this.t<=0?0:this.DB*(this.t-1)+Rn(this.data[this.t-1]^this.s&this.DM)}function Jc(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function eh(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function th(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function rh(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function nh(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function ih(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&w.ZERO.subTo(t,t)}function ah(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function sh(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=V());var a=V(),s=this.s,o=e.s,f=this.DB-Rn(n.data[n.t-1]);f>0?(n.lShiftTo(f,a),i.lShiftTo(f,r)):(n.copyTo(a),i.copyTo(r));var u=a.t,c=a.data[u-1];if(c!=0){var h=c*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),l=this.FV/h,y=(1<<this.F1)/h,p=1<<this.F2,g=r.t,x=g-u,b=t??V();for(a.dlShiftTo(x,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),w.ONE.dlShiftTo(u,b),b.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--x>=0;){var E=r.data[--g]==c?this.DM:Math.floor(r.data[g]*l+(r.data[g-1]+p)*y);if((r.data[g]+=a.am(0,E,r,x,0,u))<E)for(a.dlShiftTo(x,b),r.subTo(b,r);r.data[g]<--E;)r.subTo(b,r)}t!=null&&(r.drShiftTo(u,t),s!=o&&w.ZERO.subTo(t,t)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),s<0&&w.ZERO.subTo(r,r)}}}function oh(e){var t=V();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(w.ZERO)>0&&e.subTo(t,t),t}function Ot(e){this.m=e}function uh(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function fh(e){return e}function ch(e){e.divRemTo(this.m,null,e)}function hh(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function lh(e,t){e.squareTo(t),this.reduce(t)}Ot.prototype.convert=uh;Ot.prototype.revert=fh;Ot.prototype.reduce=ch;Ot.prototype.mulTo=hh;Ot.prototype.sqrTo=lh;function ph(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ft(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function dh(e){var t=V();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(w.ZERO)>0&&this.m.subTo(t,t),t}function yh(e){var t=V();return e.copyTo(t),this.reduce(t),t}function gh(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function vh(e,t){e.squareTo(t),this.reduce(t)}function xh(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ft.prototype.convert=dh;Ft.prototype.revert=yh;Ft.prototype.reduce=gh;Ft.prototype.mulTo=xh;Ft.prototype.sqrTo=vh;function mh(){return(this.t>0?this.data[0]&1:this.s)==0}function bh(e,t){if(e>4294967295||e<1)return w.ONE;var r=V(),n=V(),i=t.convert(this),a=Rn(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function wh(e,t){var r;return e<256||t.isEven()?r=new Ot(t):r=new Ft(t),this.exp(e,r)}w.prototype.copyTo=Hc;w.prototype.fromInt=Gc;w.prototype.fromString=Wc;w.prototype.clamp=jc;w.prototype.dlShiftTo=Jc;w.prototype.drShiftTo=eh;w.prototype.lShiftTo=th;w.prototype.rShiftTo=rh;w.prototype.subTo=nh;w.prototype.multiplyTo=ih;w.prototype.squareTo=ah;w.prototype.divRemTo=sh;w.prototype.invDigit=ph;w.prototype.isEven=mh;w.prototype.exp=bh;w.prototype.toString=$c;w.prototype.negate=Yc;w.prototype.abs=Qc;w.prototype.compareTo=Zc;w.prototype.bitLength=Xc;w.prototype.mod=oh;w.prototype.modPowInt=wh;w.ZERO=bt(0);w.ONE=bt(1);function Sh(){var e=V();return this.copyTo(e),e}function Eh(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Bh(){return this.t==0?this.s:this.data[0]<<24>>24}function Ah(){return this.t==0?this.s:this.data[0]<<16>>16}function Ch(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Th(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Ih(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=bt(r),i=V(),a=V(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function _h(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,o=0;o<e.length;++o){var f=_o(e,o);if(f<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+f,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&w.ZERO.subTo(this,this)}function Rh(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(w.ONE.shiftLeft(e-1),Vi,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(w.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Dh(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function Ph(e){return this.compareTo(e)==0}function Kh(e){return this.compareTo(e)<0?this:e}function kh(e){return this.compareTo(e)>0?this:e}function Nh(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function Lh(e,t){return e&t}function Uh(e){var t=V();return this.bitwiseTo(e,Lh,t),t}function Vi(e,t){return e|t}function qh(e){var t=V();return this.bitwiseTo(e,Vi,t),t}function Ro(e,t){return e^t}function Oh(e){var t=V();return this.bitwiseTo(e,Ro,t),t}function Do(e,t){return e&~t}function Fh(e){var t=V();return this.bitwiseTo(e,Do,t),t}function Mh(){for(var e=V(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Vh(e){var t=V();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function zh(e){var t=V();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Hh(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function Gh(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Hh(this.data[e]);return this.s<0?this.t*this.DB:-1}function Wh(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function jh(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Wh(this.data[r]^t);return e}function $h(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Yh(e,t){var r=w.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Qh(e){return this.changeBit(e,Vi)}function Zh(e){return this.changeBit(e,Do)}function Xh(e){return this.changeBit(e,Ro)}function Jh(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function el(e){var t=V();return this.addTo(e,t),t}function tl(e){var t=V();return this.subTo(e,t),t}function rl(e){var t=V();return this.multiplyTo(e,t),t}function nl(e){var t=V();return this.divRemTo(e,t,null),t}function il(e){var t=V();return this.divRemTo(e,null,t),t}function al(e){var t=V(),r=V();return this.divRemTo(e,t,r),new Array(t,r)}function sl(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function ol(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Dr(){}function Po(e){return e}function ul(e,t,r){e.multiplyTo(t,r)}function fl(e,t){e.squareTo(t)}Dr.prototype.convert=Po;Dr.prototype.revert=Po;Dr.prototype.mulTo=ul;Dr.prototype.sqrTo=fl;function cl(e){return this.exp(e,new Dr)}function hl(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function ll(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function ar(e){this.r2=V(),this.q3=V(),w.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function pl(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=V();return e.copyTo(t),this.reduce(t),t}function dl(e){return e}function yl(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function gl(e,t){e.squareTo(t),this.reduce(t)}function vl(e,t,r){e.multiplyTo(t,r),this.reduce(r)}ar.prototype.convert=pl;ar.prototype.revert=dl;ar.prototype.reduce=yl;ar.prototype.mulTo=vl;ar.prototype.sqrTo=gl;function xl(e,t){var r=e.bitLength(),n,i=bt(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Ot(t):t.isEven()?a=new ar(t):a=new Ft(t);var s=new Array,o=3,f=n-1,u=(1<<n)-1;if(s[1]=a.convert(this),n>1){var c=V();for(a.sqrTo(s[1],c);o<=u;)s[o]=V(),a.mulTo(c,s[o-2],s[o]),o+=2}var h=e.t-1,l,y=!0,p=V(),g;for(r=Rn(e.data[h])-1;h>=0;){for(r>=f?l=e.data[h]>>r-f&u:(l=(e.data[h]&(1<<r+1)-1)<<f-r,h>0&&(l|=e.data[h-1]>>this.DB+r-f)),o=n;(l&1)==0;)l>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),y)s[l].copyTo(i),y=!1;else{for(;o>1;)a.sqrTo(i,p),a.sqrTo(p,i),o-=2;o>0?a.sqrTo(i,p):(g=i,i=p,p=g),a.mulTo(p,s[l],i)}for(;h>=0&&(e.data[h]&1<<r)==0;)a.sqrTo(i,p),g=i,i=p,p=g,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function ml(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function bl(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function wl(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return w.ZERO;for(var r=e.clone(),n=this.clone(),i=bt(1),a=bt(0),s=bt(0),o=bt(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),t&&s.subTo(i,s),o.subTo(a,o))}if(n.compareTo(w.ONE)!=0)return w.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var Me=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Sl=(1<<26)/Me[Me.length-1];function El(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Me[Me.length-1]){for(t=0;t<Me.length;++t)if(r.data[0]==Me[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Me.length;){for(var n=Me[t],i=t+1;i<Me.length&&n<Sl;)n*=Me[i++];for(n=r.modInt(n);t<i;)if(n%Me[t++]==0)return!1}return r.millerRabin(e)}function Bl(e){var t=this.subtract(w.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=Al(),a,s=0;s<e;++s){do a=new w(this.bitLength(),i);while(a.compareTo(w.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(n,this);if(o.compareTo(w.ONE)!=0&&o.compareTo(t)!=0){for(var f=1;f++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(w.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function Al(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}w.prototype.chunkSize=Ch;w.prototype.toRadix=Ih;w.prototype.fromRadix=_h;w.prototype.fromNumber=Rh;w.prototype.bitwiseTo=Nh;w.prototype.changeBit=Yh;w.prototype.addTo=Jh;w.prototype.dMultiply=sl;w.prototype.dAddOffset=ol;w.prototype.multiplyLowerTo=hl;w.prototype.multiplyUpperTo=ll;w.prototype.modInt=bl;w.prototype.millerRabin=Bl;w.prototype.clone=Sh;w.prototype.intValue=Eh;w.prototype.byteValue=Bh;w.prototype.shortValue=Ah;w.prototype.signum=Th;w.prototype.toByteArray=Dh;w.prototype.equals=Ph;w.prototype.min=Kh;w.prototype.max=kh;w.prototype.and=Uh;w.prototype.or=qh;w.prototype.xor=Oh;w.prototype.andNot=Fh;w.prototype.not=Mh;w.prototype.shiftLeft=Vh;w.prototype.shiftRight=zh;w.prototype.getLowestSetBit=Gh;w.prototype.bitCount=jh;w.prototype.testBit=$h;w.prototype.setBit=Qh;w.prototype.clearBit=Zh;w.prototype.flipBit=Xh;w.prototype.add=el;w.prototype.subtract=tl;w.prototype.multiply=rl;w.prototype.divide=nl;w.prototype.remainder=il;w.prototype.divideAndRemainder=al;w.prototype.modPow=xl;w.prototype.modInverse=wl;w.prototype.pow=cl;w.prototype.gcd=ml;w.prototype.isProbablePrime=El});var qo=T((Qy,Uo)=>{var Ye=Q();qt();ue();var ko=Uo.exports=Ye.sha1=Ye.sha1||{};Ye.md.sha1=Ye.md.algorithms.sha1=ko;ko.create=function(){No||Cl();var e=null,t=Ye.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Ye.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Ye.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),Lo(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ye.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(zi.substr(0,n.blockLength-s));for(var o,f,u=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Lo(h,r,i);var l=Ye.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},n};var zi=null,No=!1;function Cl(){zi=String.fromCharCode(128),zi+=Ye.util.fillString(String.fromCharCode(0),64),No=!0}function Lo(e,t,r){for(var n,i,a,s,o,f,u,c,h=r.length();h>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,f=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,u=o^a&(s^o),n=(i<<5|i>>>27)+u+f+1518500249+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<20;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,u=o^a&(s^o),n=(i<<5|i>>>27)+u+f+1518500249+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<32;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,u=a^s^o,n=(i<<5|i>>>27)+u+f+1859775393+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<40;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=a^s^o,n=(i<<5|i>>>27)+u+f+1859775393+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<60;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=a&s|o&(a^s),n=(i<<5|i>>>27)+u+f+2400959708+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<80;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=a^s^o,n=(i<<5|i>>>27)+u+f+3395469782+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+f|0,h-=64}}});var Mo=T((Zy,Fo)=>{var Qe=Q();ue();Rr();qo();var Oo=Fo.exports=Qe.pkcs1=Qe.pkcs1||{};Oo.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=Qe.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),f=o-2*a.digestLength-2;if(t.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=f,u}n||(n=""),a.update(n,"raw");for(var c=a.digest(),h="",l=f-t.length,y=0;y<l;y++)h+="\0";var p=c.getBytes()+h+""+t;if(!i)i=Qe.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=a.digestLength,u}var g=Pn(i,o-a.digestLength-1,s),x=Qe.util.xorBytes(p,g,p.length),b=Pn(x,a.digestLength,s),E=Qe.util.xorBytes(i,b,i.length);return"\0"+E+x};Oo.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=t.length,x.expectedLength=s,x}if(i===void 0?i=Qe.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),f=t.charAt(0),u=t.substring(1,i.digestLength+1),c=t.substring(1+i.digestLength),h=Pn(c,i.digestLength,a),l=Qe.util.xorBytes(u,h,u.length),y=Pn(l,s-i.digestLength-1,a),p=Qe.util.xorBytes(c,y,c.length),g=p.substring(0,i.digestLength),x=f!=="\0",b=0;b<i.digestLength;++b)x|=o.charAt(b)!==g.charAt(b);for(var E=1,A=i.digestLength,k=i.digestLength;k<p.length;k++){var _=p.charCodeAt(k),R=_&1^1,O=E?65534:0;x|=_&O,E=E&R,A+=E}if(x||p.charCodeAt(A)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(A+1)};function Pn(e,t,r){r||(r=Qe.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var Vo=T((Xy,Hi)=>{var wt=Q();ue();Dn();Rr();(function(){if(wt.prime){Hi.exports=wt.prime;return}var e=Hi.exports=wt.prime=wt.prime||{},t=wt.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(h,l){return h|l};e.generateProbablePrime=function(h,l,y){typeof l=="function"&&(y=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var g=l.prng||wt.random,x={nextBytes:function(b){for(var E=g.getBytesSync(b.length),A=0;A<b.length;++A)b[A]=E.charCodeAt(A)}};if(p.name==="PRIMEINC")return a(h,x,p.options,y);throw new Error("Invalid prime generation algorithm: "+p.name)};function a(h,l,y,p){return"workers"in y?f(h,l,y,p):s(h,l,y,p)}function s(h,l,y,p){var g=u(h,l),x=0,b=c(g.bitLength());"millerRabinTests"in y&&(b=y.millerRabinTests);var E=10;"maxBlockTime"in y&&(E=y.maxBlockTime),o(g,h,l,x,b,E,p)}function o(h,l,y,p,g,x,b){var E=+new Date;do{if(h.bitLength()>l&&(h=u(l,y)),h.isProbablePrime(g))return b(null,h);h.dAddOffset(r[p++%8],0)}while(x<0||+new Date-E<x);wt.util.setImmediate(function(){o(h,l,y,p,g,x,b)})}function f(h,l,y,p){if(typeof Worker=="undefined")return s(h,l,y,p);var g=u(h,l),x=y.workers,b=y.workLoad||100,E=b*30/8,A=y.workerScript||"forge/prime.worker.js";if(x===-1)return wt.util.estimateCores(function(_,R){_&&(R=2),x=R-1,k()});k();function k(){x=Math.max(1,x);for(var _=[],R=0;R<x;++R)_[R]=new Worker(A);for(var O=x,R=0;R<x;++R)_[R].addEventListener("message",ye);var G=!1;function ye(Ue){if(!G){--O;var Te=Ue.data;if(Te.found){for(var be=0;be<_.length;++be)_[be].terminate();return G=!0,p(null,new t(Te.prime,16))}g.bitLength()>h&&(g=u(h,l));var Wt=g.toString(16);Ue.target.postMessage({hex:Wt,workLoad:b}),g.dAddOffset(E,0)}}}}function u(h,l){var y=new t(h,l),p=h-1;return y.testBit(p)||y.bitwiseTo(t.ONE.shiftLeft(p),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function c(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var kn=T((Jy,Yo)=>{var N=Q();_r();Dn();mn();Mo();Vo();Rr();ue();typeof F=="undefined"&&(F=N.jsbn.BigInteger);var F,Gi=N.util.isNodejs?nr():null,v=N.asn1,Pe=N.util;N.pki=N.pki||{};Yo.exports=N.pki.rsa=N.rsa=N.rsa||{};var L=N.pki,Tl=[6,4,2,4,2,4,6,2],Il={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},_l={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Rl={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Dl=N.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Pl=function(e){var t;if(e.algorithm in L.oids)t=L.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=v.oidToDer(t).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),a=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);a.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),a.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var s=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),v.toDer(i).getBytes()},zo=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(F.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(F.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new F(N.util.bytesToHex(N.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(F.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};L.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Ho(e,t,r)):(i=N.util.createBuffer(),i.putBytes(e));for(var s=new F(i.toHex(),16),o=zo(s,t,n),f=o.toString(16),u=N.util.createBuffer(),c=a-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(N.util.hexToBytes(f)),u.getBytes()};L.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new F(N.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=zo(s,t,r),f=o.toString(16),u=N.util.createBuffer(),c=i-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(N.util.hexToBytes(f)),n!==!1?Kn(u.getBytes(),t,r):u.getBytes()};L.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||N.random,i={nextBytes:function(o){for(var f=n.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new F(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};L.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new F(null);r.fromInt(30);for(var n=0,i=function(h,l){return h|l},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var f=e.p===null?e.pBits:e.qBits,u=f-1;e.pqState===0?(e.num=new F(f,e.rng),e.num.testBit(u)||e.num.bitwiseTo(F.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>f?e.pqState=0:e.num.isProbablePrime(kl(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Tl[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(F.ONE).gcd(e.e).compareTo(F.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(F.ONE),e.q1=e.q.subtract(F.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(F.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var c=e.e.modInverse(e.phi);e.keys={privateKey:L.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:L.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};L.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!N.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(Go("generateKeyPair"))return Gi.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return n(o);n(null,{privateKey:L.privateKeyFromPem(u),publicKey:L.publicKeyFromPem(f)})});if(Wo("generateKey")&&Wo("exportKey"))return Pe.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:$o(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Pe.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var f=L.privateKeyFromAsn1(v.fromDer(N.util.createBuffer(o)));n(null,{privateKey:f,publicKey:L.setRsaPublicKey(f.n,f.e)})}});if(jo("generateKey")&&jo("exportKey")){var i=Pe.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:$o(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var f=o.target.result,u=Pe.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var h=c.target.result,l=L.privateKeyFromAsn1(v.fromDer(N.util.createBuffer(h)));n(null,{privateKey:l,publicKey:L.setRsaPublicKey(l.n,l.e)})},u.onerror=function(c){n(c)}},i.onerror=function(o){n(o)};return}}else if(Go("generateKeyPairSync")){var a=Gi.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:L.privateKeyFromPem(a.privateKey),publicKey:L.publicKeyFromPem(a.publicKey)}}}var s=L.rsa.createKeyPairGenerationState(e,t,r);if(!n)return L.rsa.stepKeyPairGenerationState(s,0),s.keys;Kl(s,r,n)};L.setRsaPublicKey=L.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,f,u){return Ho(o,f,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,f){return N.pkcs1.encode_rsa_oaep(f,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return L.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),a==="RSASSA-PKCS1-V1_5"?a={verify:function(o,f){f=Kn(f,r,!0);var u=v.fromDer(f);return o===u.value[1].value}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(o,f){return f=Kn(f,r,!0),o===f}});var s=L.rsa.decrypt(i,r,!0,!1);return a.verify(n,s,r.n.bitLength())},r};L.setRsaPrivateKey=L.rsa.setPrivateKey=function(e,t,r,n,i,a,s,o){var f={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:o};return f.decrypt=function(u,c,h){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var l=L.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:Kn};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(y,p){return N.pkcs1.decode_rsa_oaep(p,y,h)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(l,f,!1)},f.sign=function(u,c){var h=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:Pl},h=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},h=1);var l=c.encode(u,f.n.bitLength());return L.rsa.encrypt(l,f,h)},f};L.wrapRsaPrivateKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(L.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(e).getBytes())])};L.privateKeyFromAsn1=function(e){var t={},r=[];if(v.validate(e,Il,t,r)&&(e=v.fromDer(N.util.createBuffer(t.privateKey))),t={},r=[],!v.validate(e,_l,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,o,f,u,c,h;return i=N.util.createBuffer(t.privateKeyModulus).toHex(),a=N.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=N.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=N.util.createBuffer(t.privateKeyPrime1).toHex(),f=N.util.createBuffer(t.privateKeyPrime2).toHex(),u=N.util.createBuffer(t.privateKeyExponent1).toHex(),c=N.util.createBuffer(t.privateKeyExponent2).toHex(),h=N.util.createBuffer(t.privateKeyCoefficient).toHex(),L.setRsaPrivateKey(new F(i,16),new F(a,16),new F(s,16),new F(o,16),new F(f,16),new F(u,16),new F(c,16),new F(h,16))};L.privateKeyToAsn1=L.privateKeyToRSAPrivateKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.qInv))])};L.publicKeyFromAsn1=function(e){var t={},r=[];if(v.validate(e,Dl,t,r)){var n=v.derToOid(t.publicKeyOid);if(n!==L.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!v.validate(e,Rl,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=N.util.createBuffer(t.publicKeyModulus).toHex(),s=N.util.createBuffer(t.publicKeyExponent).toHex();return L.setRsaPublicKey(new F(a,16),new F(s,16))};L.publicKeyToAsn1=L.publicKeyToSubjectPublicKeyInfo=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(L.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[L.publicKeyToRSAPublicKey(e)])])};L.publicKeyToRSAPublicKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Ze(e.e))])};function Ho(e,t,r){var n=N.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<s;++f)n.putByte(o)}else for(;s>0;){for(var u=0,c=N.random.getBytes(s),f=0;f<s;++f)o=c.charCodeAt(f),o===0?++u:n.putByte(o);s=u}return n.putByte(0),n.putBytes(e),n}function Kn(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=N.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=i-3-n;for(var u=0;u<f;++u)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++f}else if(o===2)for(f=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++f}var c=a.getByte();if(c!==0||f!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function Kl(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(o,f){if(o)return r(o);if(e.p=f,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,f){N.prime.generateProbablePrime(o,n,f)}function s(o,f){if(o)return r(o);if(e.q=f,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(F.ONE).gcd(e.e).compareTo(F.ONE)!==0){e.p=null,i();return}if(e.q.subtract(F.ONE).gcd(e.e).compareTo(F.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(F.ONE),e.q1=e.q.subtract(F.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(F.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var c=e.e.modInverse(e.phi);e.keys={privateKey:L.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:L.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Ze(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=N.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function kl(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Go(e){return N.util.isNodejs&&typeof Gi[e]=="function"}function Wo(e){return typeof Pe.globalScope!="undefined"&&typeof Pe.globalScope.crypto=="object"&&typeof Pe.globalScope.crypto.subtle=="object"&&typeof Pe.globalScope.crypto.subtle[e]=="function"}function jo(e){return typeof Pe.globalScope!="undefined"&&typeof Pe.globalScope.msCrypto=="object"&&typeof Pe.globalScope.msCrypto.subtle=="object"&&typeof Pe.globalScope.msCrypto.subtle[e]=="function"}function $o(e){for(var t=N.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var t0=T((e1,e0)=>{var I=Q();Li();_r();io();qt();mn();fo();lo();Rr();Ao();kn();ue();typeof Qo=="undefined"&&(Qo=I.jsbn.BigInteger);var Qo,m=I.asn1,U=I.pki=I.pki||{};e0.exports=U.pbe=I.pbe=I.pbe||{};var Mt=U.oids,Nl={name:"EncryptedPrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Ll={name:"PBES2Algorithms",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Ul={name:"pkcs-12PbeParams",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"iterations"}]};U.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=I.random.getBytesSync(r.saltSize),i=r.count,a=m.integerToDer(i),s,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,h;switch(r.algorithm){case"aes128":s=16,u=16,c=Mt["aes128-CBC"],h=I.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,c=Mt["aes192-CBC"],h=I.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,c=Mt["aes256-CBC"],h=I.aes.createEncryptionCipher;break;case"des":s=8,u=8,c=Mt.desCBC,h=I.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Jo(y),g=I.pkcs5.pbkdf2(t,n,i,s,p),x=I.random.getBytesSync(u),b=h(g);b.start(x),b.update(m.toDer(e)),b.finish(),f=b.output.getBytes();var E=ql(n,a,s,y);o=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(Mt.pkcs5PBES2).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(Mt.pkcs5PBKDF2).getBytes()),E]),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(c).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,x)])])])}else if(r.algorithm==="3des"){s=24;var A=new I.util.ByteBuffer(n),g=U.pbe.generatePkcs12Key(t,A,1,i,s),x=U.pbe.generatePkcs12Key(t,A,2,i,s),b=I.des.createEncryptionCipher(g);b.start(x),b.update(m.toDer(e)),b.finish(),f=b.output.getBytes(),o=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(Mt["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,n),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,a.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var k=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[o,m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,f)]);return k};U.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!m.validate(e,Nl,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=m.derToOid(n.encryptionOid),o=U.pbe.getCipher(s,n.encryptionParams,t),f=I.util.createBuffer(n.encryptedData);return o.update(f),o.finish()&&(r=m.fromDer(o.output)),r};U.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:m.toDer(e).getBytes()};return I.pem.encode(r,{maxline:t})};U.encryptedPrivateKeyFromPem=function(e){var t=I.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return m.fromDer(t.body)};U.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=U.wrapRsaPrivateKey(U.privateKeyToAsn1(e));return n=U.encryptPrivateKeyInfo(n,t,r),U.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=I.random.getBytesSync(16),o=I.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=I.random.getBytesSync(16),o=I.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=I.random.getBytesSync(16),o=I.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=I.random.getBytesSync(8),o=I.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=I.random.getBytesSync(8),o=I.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=I.pbe.opensslDeriveBytes(t,a.substr(0,8),s),c=o(u);c.start(a),c.update(m.toDer(U.privateKeyToAsn1(e))),c.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:I.util.bytesToHex(a).toUpperCase()},body:c.output.getBytes()};return I.pem.encode(h)};U.decryptRsaPrivateKey=function(e,t){var r=null,n=I.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=I.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=I.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=I.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=I.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=I.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return I.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return I.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return I.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=I.util.hexToBytes(n.dekInfo.parameters),f=I.pbe.opensslDeriveBytes(t,o.substr(0,8),a),u=s(f);if(u.start(o),u.update(I.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=U.decryptPrivateKeyInfo(m.fromDer(r),t):r=m.fromDer(r),r!==null&&(r=U.privateKeyFromAsn1(r)),r};U.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in I.md))throw new Error('"sha1" hash algorithm unavailable.');a=I.md.sha1.create()}var f=a.digestLength,u=a.blockLength,c=new I.util.ByteBuffer,h=new I.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)h.putInt16(e.charCodeAt(o));h.putInt16(0)}var l=h.length(),y=t.length(),p=new I.util.ByteBuffer;p.fillWithByte(r,u);var g=u*Math.ceil(y/u),x=new I.util.ByteBuffer;for(o=0;o<g;o++)x.putByte(t.at(o%y));var b=u*Math.ceil(l/u),E=new I.util.ByteBuffer;for(o=0;o<b;o++)E.putByte(h.at(o%l));var A=x;A.putBuffer(E);for(var k=Math.ceil(i/f),_=1;_<=k;_++){var R=new I.util.ByteBuffer;R.putBytes(p.bytes()),R.putBytes(A.bytes());for(var O=0;O<n;O++)a.start(),a.update(R.getBytes()),R=a.digest();var G=new I.util.ByteBuffer;for(o=0;o<u;o++)G.putByte(R.at(o%f));var ye=Math.ceil(y/u)+Math.ceil(l/u),Ue=new I.util.ByteBuffer;for(s=0;s<ye;s++){var Te=new I.util.ByteBuffer(A.getBytes(u)),be=511;for(o=G.length()-1;o>=0;o--)be=be>>8,be+=G.at(o)+Te.at(o),Te.setAt(o,be&255);Ue.putBuffer(Te)}A=Ue,c.putBuffer(R)}return c.truncate(c.length()-i),c};U.pbe.getCipher=function(e,t,r){switch(e){case U.oids.pkcs5PBES2:return U.pbe.getCipherForPBES2(e,t,r);case U.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case U.oids["pbewithSHAAnd40BitRC2-CBC"]:return U.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};U.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!m.validate(t,Ll,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=m.derToOid(n.kdfOid),e!==U.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=m.derToOid(n.encOid),e!==U.oids["aes128-CBC"]&&e!==U.oids["aes192-CBC"]&&e!==U.oids["aes256-CBC"]&&e!==U.oids["des-EDE3-CBC"]&&e!==U.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,o=I.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(U.oids[e]){case"aes128-CBC":f=16,u=I.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=I.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=I.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=I.des.createDecryptionCipher;break;case"desCBC":f=8,u=I.des.createDecryptionCipher;break}var c=Xo(n.prfOid),h=I.pkcs5.pbkdf2(r,s,o,f,c),l=n.encIv,y=u(h);return y.start(l),y};U.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!m.validate(t,Ul,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=I.util.createBuffer(n.salt),o=I.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(e){case U.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=I.des.startDecrypting;break;case U.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(g,x){var b=I.rc2.createDecryptionCipher(g,40);return b.start(x,null),b};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var h=Xo(n.prfOid),l=U.pbe.generatePkcs12Key(r,s,1,o,f,h);h.start();var y=U.pbe.generatePkcs12Key(r,s,2,o,u,h);return c(l,y)};U.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in I.md))throw new Error('"md5" hash algorithm unavailable.');n=I.md.md5.create()}t===null&&(t="");for(var i=[Zo(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(Zo(n,i[s-1]+e+t));return i.join("").substr(0,r)};function Zo(e,t){return e.start().update(t).digest().getBytes()}function Xo(e){var t;if(!e)t="hmacWithSHA1";else if(t=U.oids[m.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Jo(t)}function Jo(e){var t=I.md;switch(e){case"hmacWithSHA224":t=I.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function ql(e,t,r,n){var i=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,e),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,I.util.hexToBytes(r.toString(16))),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(U.oids[n]).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")])),i}});var Xe=T((t1,n0)=>{"use strict";function r0(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Ol(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return r0(e,r)}catch(n){r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),r0(new i,r)}}n0.exports=Ol});var Wi={};ge(Wi,{identity:()=>Fl});var Fl,i0=Y(()=>{Ve();pt();Fl=sn({prefix:"\0",name:"identity",encode:e=>_a(e),decode:e=>Ia(e)})});var ji={};ge(ji,{base2:()=>Ml});var Ml,a0=Y(()=>{Ve();Ml=ae({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var $i={};ge($i,{base8:()=>Vl});var Vl,s0=Y(()=>{Ve();Vl=ae({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Yi={};ge(Yi,{base10:()=>zl});var zl,o0=Y(()=>{Ve();zl=dt({prefix:"9",name:"base10",alphabet:"0123456789"})});var Pr,u0,Nn=Y(()=>{xr();Pr=({name:e,code:t,encode:r})=>new u0(e,t,r),u0=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}async digest(t){if(t instanceof Uint8Array){let r=await this.encode(t);return vr(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var Vt={};ge(Vt,{sha256:()=>Hl,sha512:()=>Gl});var c0,Hl,Gl,sr=Y(()=>{Nn();c0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Hl=Pr({name:"sha2-256",code:18,encode:c0("SHA-256")}),Gl=Pr({name:"sha2-512",code:19,encode:c0("SHA-512")})});var Kr={};ge(Kr,{identity:()=>Wl});var Wl,Ln=Y(()=>{Nn();pt();Wl=Pr({name:"identity",code:0,encode:e=>at(e)})});var h0=Y(()=>{pt()});var l1,p1,l0=Y(()=>{l1=new TextEncoder,p1=new TextDecoder});var p0=Y(()=>{oi();nn();pt();Nn();xr()});var Qi,v1,d0=Y(()=>{i0();a0();s0();o0();fi();br();ui();Zt();Sr();sr();Ln();h0();l0();p0();Qi={...Wi,...ji,...$i,...Yi,...cn,...mr,...fn,...Qt,...Jt},v1={...Vt,...Kr}});function y0(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var g0,Zi,Yl,Un,Xi=Y(()=>{d0();g0=y0("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),Zi=y0("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Yl={utf8:g0,"utf-8":g0,hex:Qi.base16,latin1:Zi,ascii:Zi,binary:Zi,...Qi},Un=Yl});var St={};ge(St,{fromString:()=>Ql});function Ql(e,t="utf8"){let r=Un[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var Et=Y(()=>{Xi()});var kr={};ge(kr,{concat:()=>Zl});function Zl(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));let r=new Uint8Array(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}var Nr=Y(()=>{});var Lr=T(v0=>{"use strict";v0.get=(e=globalThis)=>{let t=e.crypto;if(!t||!t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}});var Ji=T((E1,m0)=>{"use strict";var{concat:Xl}=(Nr(),kr),{fromString:x0}=(Et(),St),Jl=Lr();function ep({algorithm:e="AES-GCM",nonceLength:t=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:a=32767}={}){let s=Jl.get();r*=8;async function o(u,c){let h=s.getRandomValues(new Uint8Array(i)),l=s.getRandomValues(new Uint8Array(t)),y={name:e,iv:l},p={name:"PBKDF2",salt:h,iterations:a,hash:{name:n}},g=await s.subtle.importKey("raw",x0(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),x=await s.subtle.deriveKey(p,g,{name:e,length:r},!0,["encrypt"]),b=await s.subtle.encrypt(y,x,u);return Xl([h,y.iv,new Uint8Array(b)])}async function f(u,c){let h=u.slice(0,i),l=u.slice(i,i+t),y=u.slice(i+t),p={name:e,iv:l},g={name:"PBKDF2",salt:h,iterations:a,hash:{name:n}},x=await s.subtle.importKey("raw",x0(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),b=await s.subtle.deriveKey(g,x,{name:e,length:r},!0,["decrypt"]),E=await s.subtle.decrypt(p,b,y);return new Uint8Array(E)}return{encrypt:o,decrypt:f}}m0.exports={create:ep}});var w0=T((B1,b0)=>{"use strict";var{base64:tp}=(Sr(),Jt),rp=Ji();b0.exports={import:async function(e,t){let r=tp.decode(e);return await rp.create().decrypt(r,t)}}});var or={};ge(or,{equals:()=>np});function np(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var ur=Y(()=>{});var Bt={};ge(Bt,{toString:()=>ip});function ip(e,t="utf8"){let r=Un[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var At=Y(()=>{Xi()});var C0=T((C1,A0)=>{var J=Q();qt();ue();var Ur=A0.exports=J.sha512=J.sha512||{};J.md.sha512=J.md.algorithms.sha512=Ur;var S0=J.sha384=J.sha512.sha384=J.sha512.sha384||{};S0.create=function(){return Ur.create("SHA-384")};J.md.sha384=J.md.algorithms.sha384=S0;J.sha512.sha256=J.sha512.sha256||{create:function(){return Ur.create("SHA-512/256")}};J.md["sha512/256"]=J.md.algorithms["sha512/256"]=J.sha512.sha256;J.sha512.sha224=J.sha512.sha224||{create:function(){return Ur.create("SHA-512/224")}};J.md["sha512/224"]=J.md.algorithms["sha512/224"]=J.sha512.sha224;Ur.create=function(e){if(E0||ap(),typeof e=="undefined"&&(e="SHA-512"),!(e in zt))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=zt[e],r=null,n=J.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);n=J.util.createBuffer(),r=new Array(t.length);for(var u=0;u<t.length;++u)r[u]=t[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=J.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=c[1],c[1]=c[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,c[0]=c[1]/4294967296>>>0;return n.putBytes(f),B0(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var f=J.util.createBuffer();f.putBytes(n.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(ea.substr(0,o.blockLength-c));for(var h,l,y=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)h=o.fullMessageLength[p+1]*8,l=h/4294967296>>>0,y+=l,f.putInt32(y>>>0),y=h>>>0;f.putInt32(y);for(var g=new Array(r.length),p=0;p<r.length;++p)g[p]=r[p].slice(0);B0(g,i,f);var x=J.util.createBuffer(),b;e==="SHA-512"?b=g.length:e==="SHA-384"?b=g.length-2:b=g.length-4;for(var p=0;p<b;++p)x.putInt32(g[p][0]),(p!==b-1||e!=="SHA-512/224")&&x.putInt32(g[p][1]);return x},o};var ea=null,E0=!1,ta=null,zt=null;function ap(){ea=String.fromCharCode(128),ea+=J.util.fillString(String.fromCharCode(0),128),ta=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],zt={},zt["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],zt["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],zt["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],zt["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],E0=!0}function B0(e,t,r){for(var n,i,a,s,o,f,u,c,h,l,y,p,g,x,b,E,A,k,_,R,O,G,ye,Ue,Te,be,Wt,tn,oe,Be,K,ei,ti,ri,ni,ba=r.length();ba>=128;){for(oe=0;oe<16;++oe)t[oe][0]=r.getInt32()>>>0,t[oe][1]=r.getInt32()>>>0;for(;oe<80;++oe)ei=t[oe-2],Be=ei[0],K=ei[1],n=((Be>>>19|K<<13)^(K>>>29|Be<<3)^Be>>>6)>>>0,i=((Be<<13|K>>>19)^(K<<3|Be>>>29)^(Be<<26|K>>>6))>>>0,ri=t[oe-15],Be=ri[0],K=ri[1],a=((Be>>>1|K<<31)^(Be>>>8|K<<24)^Be>>>7)>>>0,s=((Be<<31|K>>>1)^(Be<<24|K>>>8)^(Be<<25|K>>>7))>>>0,ti=t[oe-7],ni=t[oe-16],K=i+ti[1]+s+ni[1],t[oe][0]=n+ti[0]+a+ni[0]+(K/4294967296>>>0)>>>0,t[oe][1]=K>>>0;for(g=e[0][0],x=e[0][1],b=e[1][0],E=e[1][1],A=e[2][0],k=e[2][1],_=e[3][0],R=e[3][1],O=e[4][0],G=e[4][1],ye=e[5][0],Ue=e[5][1],Te=e[6][0],be=e[6][1],Wt=e[7][0],tn=e[7][1],oe=0;oe<80;++oe)u=((O>>>14|G<<18)^(O>>>18|G<<14)^(G>>>9|O<<23))>>>0,c=((O<<18|G>>>14)^(O<<14|G>>>18)^(G<<23|O>>>9))>>>0,h=(Te^O&(ye^Te))>>>0,l=(be^G&(Ue^be))>>>0,o=((g>>>28|x<<4)^(x>>>2|g<<30)^(x>>>7|g<<25))>>>0,f=((g<<4|x>>>28)^(x<<30|g>>>2)^(x<<25|g>>>7))>>>0,y=(g&b|A&(g^b))>>>0,p=(x&E|k&(x^E))>>>0,K=tn+c+l+ta[oe][1]+t[oe][1],n=Wt+u+h+ta[oe][0]+t[oe][0]+(K/4294967296>>>0)>>>0,i=K>>>0,K=f+p,a=o+y+(K/4294967296>>>0)>>>0,s=K>>>0,Wt=Te,tn=be,Te=ye,be=Ue,ye=O,Ue=G,K=R+i,O=_+n+(K/4294967296>>>0)>>>0,G=K>>>0,_=A,R=k,A=b,k=E,b=g,E=x,K=i+s,g=n+a+(K/4294967296>>>0)>>>0,x=K>>>0;K=e[0][1]+x,e[0][0]=e[0][0]+g+(K/4294967296>>>0)>>>0,e[0][1]=K>>>0,K=e[1][1]+E,e[1][0]=e[1][0]+b+(K/4294967296>>>0)>>>0,e[1][1]=K>>>0,K=e[2][1]+k,e[2][0]=e[2][0]+A+(K/4294967296>>>0)>>>0,e[2][1]=K>>>0,K=e[3][1]+R,e[3][0]=e[3][0]+_+(K/4294967296>>>0)>>>0,e[3][1]=K>>>0,K=e[4][1]+G,e[4][0]=e[4][0]+O+(K/4294967296>>>0)>>>0,e[4][1]=K>>>0,K=e[5][1]+Ue,e[5][0]=e[5][0]+ye+(K/4294967296>>>0)>>>0,e[5][1]=K>>>0,K=e[6][1]+be,e[6][0]=e[6][0]+Te+(K/4294967296>>>0)>>>0,e[6][1]=K>>>0,K=e[7][1]+tn,e[7][0]=e[7][0]+Wt+(K/4294967296>>>0)>>>0,e[7][1]=K>>>0,ba-=128}}});var I0=T((T1,T0)=>{"use strict";var qn=65536;function sp(e){let t=new Uint8Array(e),r=0;if(e>0)if(e>qn)for(;r<e;)r+qn>e?(crypto.getRandomValues(t.subarray(r,r+(e-r))),r+=e-r):(crypto.getRandomValues(t.subarray(r,r+qn)),r+=qn);else crypto.getRandomValues(t);return t}T0.exports=sp});var ra=T((I1,_0)=>{"use strict";var op=I0(),up=Xe();_0.exports=function(e){if(isNaN(e)||e<=0)throw up(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return op(e)}});var On=T(qr=>{"use strict";ue();Dn();var fp=Q(),{fromString:cp}=(Et(),St),{toString:R0}=(At(),Bt),{concat:D0}=(Nr(),kr);qr.bigIntegerToUintBase64url=(e,t)=>{let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=D0([new Uint8Array(t-r.length),r])}return R0(r,"base64url")};qr.base64urlToBigInteger=e=>{let t=qr.base64urlToBuffer(e);return new fp.jsbn.BigInteger(R0(t,"base16"),16)};qr.base64urlToBuffer=(e,t)=>{let r=cp(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=D0([new Uint8Array(t-r.length),r])}return r}});var k0=T(Or=>{"use strict";_r();kn();var Ct=Q(),{bigIntegerToUintBase64url:Je,base64urlToBigInteger:et}=On(),{fromString:P0}=(Et(),St),{toString:K0}=(At(),Bt);Or.pkcs1ToJwk=function(e){let t=Ct.asn1.fromDer(K0(e,"ascii")),r=Ct.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:Je(r.n),e:Je(r.e),d:Je(r.d),p:Je(r.p),q:Je(r.q),dp:Je(r.dP),dq:Je(r.dQ),qi:Je(r.qInv),alg:"RS256",kid:"2011-04-29"}};Or.jwkToPkcs1=function(e){let t=Ct.pki.privateKeyToAsn1({n:et(e.n),e:et(e.e),d:et(e.d),p:et(e.p),q:et(e.q),dP:et(e.dp),dQ:et(e.dq),qInv:et(e.qi)});return P0(Ct.asn1.toDer(t).getBytes(),"ascii")};Or.pkixToJwk=function(e){let t=Ct.asn1.fromDer(K0(e,"ascii")),r=Ct.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:Je(r.n),e:Je(r.e),alg:"RS256",kid:"2011-04-29"}};Or.jwkToPkix=function(e){let t=Ct.pki.publicKeyToAsn1({n:et(e.n),e:et(e.e)});return P0(Ct.asn1.toDer(t).getBytes(),"ascii")}});var q0=T((D1,U0)=>{"use strict";kn();var N0=Q(),{base64urlToBigInteger:hp}=On();function L0(e,t){return t.map(r=>hp(e[r]))}function lp(e){return N0.pki.setRsaPrivateKey(...L0(e,["n","e","d","p","q","dp","dq","qi"]))}function pp(e){return N0.pki.setRsaPublicKey(...L0(e,["n","e"]))}U0.exports={jwk2pub:pp,jwk2priv:lp}});var M0=T(ct=>{"use strict";var ft=Lr(),dp=ra(),{toString:yp}=(At(),Bt),{fromString:gp}=(Et(),St);ct.utils=k0();ct.generateKey=async function(e){let t=await ft.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await O0(t);return{privateKey:r[0],publicKey:r[1]}};ct.unmarshalPrivateKey=async function(e){let r=[await ft.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await vp(e)],n=await O0({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};ct.getRandomValues=dp;ct.hashAndSign=async function(e,t){let r=await ft.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await ft.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,n.byteOffset,n.byteLength)};ct.hashAndVerify=async function(e,t,r){let n=await ft.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ft.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)};function O0(e){return Promise.all([ft.get().subtle.exportKey("jwk",e.privateKey),ft.get().subtle.exportKey("jwk",e.publicKey)])}function vp(e){return ft.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:xp,jwk2priv:mp}=q0();function F0(e,t,r,n){let i=t?xp(e):mp(e),a=yp(Uint8Array.from(r),"ascii"),s=n(a,i);return gp(s,"ascii")}ct.encrypt=function(e,t){return F0(e,!0,t,(r,n)=>n.encrypt(r))};ct.decrypt=function(e,t){return F0(e,!1,t,(r,n)=>n.decrypt(r))}});var Fn=T((K1,V0)=>{"use strict";var{base64:bp}=(Sr(),Jt),wp=Ji();V0.exports={export:async function(e,t){let n=await wp.create().encrypt(e,t);return bp.encode(n)}}});var j0=T((k1,W0)=>{"use strict";var{sha256:z0}=(sr(),Vt),H0=Xe(),{equals:G0}=(ur(),or),{toString:Sp}=(At(),Bt);C0();var Mn=Q(),Ke=M0(),Vn=gn(),Ep=Fn(),zn=class{constructor(t){this._key=t}async verify(t,r){return Ke.hashAndVerify(this._key,r,t)}marshal(){return Ke.utils.jwkToPkix(this._key)}get bytes(){return Vn.PublicKey.encode({Type:Vn.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(t){return Ke.encrypt(this._key,t)}equals(t){return G0(this.bytes,t.bytes)}async hash(){let{bytes:t}=await z0.digest(this.bytes);return t}},Fr=class{constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return Ke.getRandomValues(16)}async sign(t){return Ke.hashAndSign(this._key,t)}get public(){if(!this._publicKey)throw H0(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new zn(this._publicKey)}decrypt(t){return Ke.decrypt(this._key,t)}marshal(){return Ke.utils.jwkToPkcs1(this._key)}get bytes(){return Vn.PrivateKey.encode({Type:Vn.KeyType.RSA,Data:this.marshal()}).finish()}equals(t){return G0(this.bytes,t.bytes)}async hash(){let{bytes:t}=await z0.digest(this.bytes);return t}async id(){let t=await this.public.hash();return Sp(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new Mn.util.ByteBuffer(this.marshal()),i=Mn.asn1.fromDer(n),a=Mn.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Mn.pki.encryptRsaPrivateKey(a,t,s)}else{if(r==="libp2p-key")return Ep.export(this.bytes,t);throw H0(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function Bp(e){let t=Ke.utils.pkcs1ToJwk(e),r=await Ke.unmarshalPrivateKey(t);return new Fr(r.privateKey,r.publicKey)}function Ap(e){let t=Ke.utils.pkixToJwk(e);return new zn(t)}async function Cp(e){let t=await Ke.unmarshalPrivateKey(e);return new Fr(t.privateKey,t.publicKey)}async function Tp(e){let t=await Ke.generateKey(e);return new Fr(t.privateKey,t.publicKey)}W0.exports={RsaPublicKey:zn,RsaPrivateKey:Fr,unmarshalRsaPublicKey:Ap,unmarshalRsaPrivateKey:Bp,generateKeyPair:Tp,fromJwk:Cp}});var tu=T((ne,eu)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.utils=ne.verify=ne.sign=ne.getPublicKey=ne.SignResult=ne.Signature=ne.Point=ne.ExtendedPoint=ne.CURVE=void 0;var ie={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};ne.CURVE=ie;var Ee=32,Mr=19681161376707505956807079304988542015446066515923890162744021073123829784752n,Ip=25063068953384623474111414158702152701244531502492656460079210482610430750235n,_p=54469307008909316920995813868745141605393597292927456921205312896311721017578n,Rp=1159843021668779879193775521855586647937357759715417654439879720876111806838n,Dp=40440834346308536858101042469323190826248399146238708352240133220865137265952n,Z=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof re))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(re.ZERO)?Z.ZERO:new Z(t.x,t.y,1n,S(t.x*t.y))}static toAffineBatch(t){let r=Kp(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}static fromRistrettoHash(t){let r=aa(t.slice(0,Ee)),n=this.calcElligatorRistrettoMap(r),i=aa(t.slice(Ee,Ee*2)),a=this.calcElligatorRistrettoMap(i);return n.add(a)}static calcElligatorRistrettoMap(t){let{d:r}=ie,n=S(Mr*t*t),i=S((n+1n)*Rp),a=-1n,s=S((a-r*n)*S(n+r)),{isValid:o,value:f}=oa(i,s),u=S(f*t);It(u)||(u=S(-u)),o||(f=u),o||(a=n);let c=S(a*(n-1n)*Dp-s),h=f*f,l=S((f+f)*s),y=S(c*Ip),p=S(1n-h),g=S(1n+h);return new Z(S(l*g),S(p*y),S(y*g),S(l*p))}static fromRistrettoBytes(t){let{a:r,d:n}=ie,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",a=aa(t);if(!Lp(Y0(a,Ee),t)||It(a))throw new Error(i);let s=S(a*a),o=S(1n+r*s),f=S(1n-r*s),u=S(o*o),c=S(f*f),h=S(r*n*u-c),{isValid:l,value:y}=Z0(S(h*c)),p=S(y*f),g=S(y*p*h),x=S((a+a)*p);It(x)&&(x=S(-x));let b=S(o*g),E=S(x*b);if(!l||It(E)||b===0n)throw new Error(i);return new Z(x,b,1n,E)}toRistrettoBytes(){let{x:t,y:r,z:n,t:i}=this,a=S((n+r)*(n-r)),s=S(t*r),{value:o}=Z0(S(a*s**2n)),f=S(o*a),u=S(o*s),c=S(f*u*i),h;It(i*c)?([t,r]=[S(r*Mr),S(t*Mr)],h=S(f*_p)):h=u,It(t*c)&&(r=S(-r));let l=S((n-r)*h);return It(l)&&(l=S(-l)),Y0(l,Ee)}equals(t){let r=this,n=t,[i,a,s,o]=[r.t,n.t,r.z,n.z];return S(i*o)===S(a*s)}negate(){return new Z(S(-this.x),this.y,this.z,S(-this.t))}double(){let t=this.x,r=this.y,n=this.z,{a:i}=ie,a=S(t**2n),s=S(r**2n),o=S(2n*n**2n),f=S(i*a),u=S((t+r)**2n-a-s),c=S(f+s),h=S(c-o),l=S(f-s),y=S(u*h),p=S(c*l),g=S(u*l),x=S(h*c);return new Z(y,p,x,g)}add(t){let r=this.x,n=this.y,i=this.z,a=this.t,s=t.x,o=t.y,f=t.z,u=t.t,c=S((n-r)*(o+s)),h=S((n+r)*(o-s)),l=S(h-c);if(l===0n)return this.double();let y=S(i*2n*u),p=S(a*2n*f),g=S(p+y),x=S(h+c),b=S(p-y),E=S(g*l),A=S(x*b),k=S(g*b),_=S(l*x);return new Z(E,A,_,k)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!Q0(t))throw new TypeError("Point#multiply: expected number or bigint");let r=S(BigInt(t),ie.n);if(r===1n)return this;let n=Z.ZERO,i=this;for(;r>0n;)r&1n&&(n=n.add(i)),i=i.double(),r>>=1n;return n}precomputeWindow(t){let r=256/t+1,n=[],i=this,a=i;for(let s=0;s<r;s++){a=i,n.push(a);for(let o=1;o<2**(t-1);o++)a=a.add(i),n.push(a);i=a.double()}return n}wNAF(t,r){!r&&this.equals(Z.BASE)&&(r=re.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&na.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=Z.normalizeZ(i),na.set(r,i)));let a=Z.ZERO,s=Z.ZERO,o=256/n+1,f=2**(n-1),u=BigInt(2**n-1),c=2**n,h=BigInt(n);for(let l=0;l<o;l++){let y=l*f,p=Number(t&u);if(t>>=h,p>f&&(p-=c,t+=1n),p===0)s=s.add(l%2?i[y].negate():i[y]);else{let g=i[y+Math.abs(p)-1];a=a.add(p<0?g.negate():g)}}return[a,s]}multiply(t,r){if(!Q0(t))throw new TypeError("Point#multiply: expected number or bigint");let n=S(BigInt(t),ie.n);return Z.normalizeZ(this.wNAF(n,r))[0]}toAffine(t=sa(this.z)){let r=S(this.x*t),n=S(this.y*t);return new re(r,n)}};ne.ExtendedPoint=Z;Z.BASE=new Z(ie.Gx,ie.Gy,1n,S(ie.Gx*ie.Gy));Z.ZERO=new Z(0n,1n,1n,0n);var na=new WeakMap,re=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,na.delete(this)}static fromHex(t){let{d:r,P:n}=ie,i=t instanceof Uint8Array?t:Vr(t);if(i.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let a=i[31],s=a&~128,o=(a&128)!=0,f=Uint8Array.from(Array.from(i.slice(0,31)).concat(s)),u=fr(f);if(u>=n)throw new Error("Point.fromHex expects hex <= Fp");let c=S(u*u),h=S(c-1n),l=S(r*c+1n),{isValid:y,value:p}=oa(h,l);if(!y)throw new Error("Point.fromHex: invalid y coordinate");let g=(p&1n)===1n;return o!==g&&(p=S(-p)),new re(p,u)}static async fromPrivateKey(t){let r=await ne.utils.sha512(J0(t));return re.BASE.multiply(X0(r))}toRawBytes(){let t=ia(this.y),r=new Uint8Array(Ee);for(let i=t.length-2,a=0;a<Ee&&i>=0;i-=2,a++)r[a]=Number.parseInt(t[i]+t[i+1],16);let n=this.x&1n?128:0;return r[Ee-1]|=n,r}toHex(){return $0(this.toRawBytes())}toX25519(){return S((1n+this.y)*sa(1n-this.y))}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new re(S(-this.x),this.y)}add(t){return Z.fromAffine(this).add(Z.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Z.fromAffine(this).multiply(t,this).toAffine()}};ne.Point=re;re.BASE=new re(ie.Gx,ie.Gy);re.ZERO=new re(0n,1n);var Tt=class{constructor(t,r){this.r=t,this.s=r}static fromHex(t){t=fa(t);let r=re.fromHex(t.slice(0,32)),n=fr(t.slice(32));if(!Up(n))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Tt(r,n)}toRawBytes(){let t=Vr(ia(this.s)).reverse(),r=new Uint8Array(Ee);r.set(t);let n=new Uint8Array(Ee*2);return n.set(this.r.toRawBytes()),n.set(r,32),n}toHex(){return $0(this.toRawBytes())}};ne.Signature=Tt;ne.SignResult=Tt;function Pp(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}function $0(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function Vr(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function ia(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Y0(e,t=Ee){let r=ia(e).padStart(t*2,"0");return Vr(r).reverse()}function It(e){return(S(e)&1n)===1n}function Q0(e){return!!(typeof e=="bigint"&&e>0n||typeof e=="number"&&e>0&&Number.isSafeInteger(e))}function fr(e){let t=0n;for(let r=0;r<e.length;r++)t+=BigInt(e[r])<<8n*BigInt(r);return t}function aa(e){return S(fr(e)&2n**255n-1n)}function S(e,t=ie.P){let r=e%t;return r>=0n?r:t+r}function sa(e,t=ie.P){if(e===0n||t<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=S(e,t),n=t,[i,a,s,o]=[0n,1n,1n,0n];for(;r!==0n;){let u=n/r,c=n%r,h=i-s*u,l=a-o*u;[n,r]=[r,c],[i,a]=[s,o],[s,o]=[h,l]}if(n!==1n)throw new Error("invert: does not exist");return S(i,t)}function Kp(e,t=ie.P){let r=e.length,n=new Array(r),i=1n;for(let a=0;a<r;a++)e[a]!==0n&&(n[a]=i,i=S(i*e[a],t));i=sa(i,t);for(let a=r-1;a>=0;a--){if(e[a]===0n)continue;let s=S(i*e[a],t);e[a]=S(i*n[a],t),i=s}return e}function tt(e,t){let{P:r}=ie,n=e;for(;t-- >0n;)n*=n,n%=r;return n}function kp(e){let{P:t}=ie,n=e*e%t*e%t,i=tt(n,2n)*n%t,a=tt(i,1n)*e%t,s=tt(a,5n)*a%t,o=tt(s,10n)*s%t,f=tt(o,20n)*o%t,u=tt(f,40n)*f%t,c=tt(u,80n)*u%t,h=tt(c,80n)*u%t,l=tt(h,10n)*s%t;return tt(l,2n)*e%t}function oa(e,t){let r=S(t*t*t),n=S(r*r*t),i=S(e*r*kp(e*n)),a=S(t*i*i),s=i,o=S(i*Mr),f=a===e,u=a===S(-e),c=a===S(-e*Mr);return f&&(i=s),(u||c)&&(i=o),It(i)&&(i=S(-i)),{isValid:f||u,value:i}}function Z0(e){return oa(1n,e)}async function ua(...e){let t=Pp(...e),r=await ne.utils.sha512(t),n=fr(r);return S(n,ie.n)}function Np(e){return e.slice(Ee)}function X0(e){let t=Ee-1,r=e.slice(0,Ee);return r[0]&=248,r[t]&=127,r[t]|=64,S(fr(r),ie.n)}function Lp(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function fa(e){return e instanceof Uint8Array?e:Vr(e)}function Up(e){return 0<e&&e<ie.n}function J0(e){let t;if(typeof e=="bigint"||typeof e=="number"&&Number.isSafeInteger(e)){if(t=BigInt(e),t<0n||t>2n**256n)throw new Error("Expected 32 bytes of private key");e=t.toString(16).padStart(Ee*2,"0")}if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");return Vr(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");return e}else throw new TypeError("Expected valid private key")}async function qp(e){let t=await re.fromPrivateKey(e);return typeof e=="string"?t.toHex():t.toRawBytes()}ne.getPublicKey=qp;async function Op(e,t){let r=await ne.utils.sha512(J0(t)),n=X0(r),i=re.BASE.multiply(n),a=fa(e),s=await ua(Np(r),a),o=re.BASE.multiply(s),f=await ua(o.toRawBytes(),i.toRawBytes(),a),u=S(s+f*n,ie.n),c=new Tt(o,u);return typeof e=="string"?c.toHex():c.toRawBytes()}ne.sign=Op;async function Fp(e,t,r){t=fa(t),r instanceof re||(r=re.fromHex(r)),e instanceof Tt||(e=Tt.fromHex(e));let n=await ua(e.r.toRawBytes(),r.toRawBytes(),t),i=Z.fromAffine(r).multiplyUnsafe(n),a=Z.BASE.multiply(e.s);return Z.fromAffine(e.r).add(i).subtract(a).multiplyUnsafe(8n).equals(Z.ZERO)}ne.verify=Fp;re.BASE._setWindowSize(8);var _t=(()=>{let e=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof eu!="undefined"&&typeof rn=="function"&&!e?nr():void 0,web:e}})();ne.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(e=32)=>{if(_t.web)return _t.web.getRandomValues(new Uint8Array(e));if(_t.node){let{randomBytes:t}=_t.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=1024;for(;e--;){let t=ne.utils.randomBytes(32),r=fr(t);if(r>1n&&r<ie.n)return t}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async e=>{if(_t.web){let t=await _t.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}else{if(_t.node)return Uint8Array.from(_t.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=re.BASE){let r=t.equals(re.BASE)?t:new re(t.x,t.y);return r._setWindowSize(e),r.multiply(1n),r}}});var nu=T(Rt=>{"use strict";var zr=tu(),Mp=32,Vp=64,Hn=32;Rt.publicKeyLength=Mp;Rt.privateKeyLength=Vp;Rt.generateKey=async function(){let e=zr.utils.randomPrivateKey(),t=await zr.getPublicKey(e);return{privateKey:ru(e,t),publicKey:t}};Rt.generateKeyFromSeed=async function(e){if(e.length!==Hn)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await zr.getPublicKey(t);return{privateKey:ru(t,r),publicKey:r}};Rt.hashAndSign=function(e,t){let r=e.slice(0,Hn);return zr.sign(t,r)};Rt.hashAndVerify=function(e,t,r){return zr.verify(t,r,e)};function ru(e,t){let r=new Uint8Array(Rt.privateKeyLength);for(let n=0;n<Hn;n++)r[n]=e[n],r[Hn+n]=t[n];return r}});var uu=T((L1,ou)=>{"use strict";var iu=Xe(),{equals:au}=(ur(),or),{sha256:su}=(sr(),Vt),{base58btc:zp}=(Zt(),Qt),{identity:Hp}=(Ln(),Kr),xe=nu(),Gn=gn(),Gp=Fn(),Wn=class{constructor(t){this._key=hr(t,xe.publicKeyLength)}async verify(t,r){return xe.hashAndVerify(this._key,r,t)}marshal(){return this._key}get bytes(){return Gn.PublicKey.encode({Type:Gn.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return au(this.bytes,t.bytes)}async hash(){let{bytes:t}=await su.digest(this.bytes);return t}},cr=class{constructor(t,r){this._key=hr(t,xe.privateKeyLength),this._publicKey=hr(r,xe.publicKeyLength)}async sign(t){return xe.hashAndSign(this._key,t)}get public(){return new Wn(this._publicKey)}marshal(){return this._key}get bytes(){return Gn.PrivateKey.encode({Type:Gn.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return au(this.bytes,t.bytes)}async hash(){let{bytes:t}=await su.digest(this.bytes);return t}async id(){let t=await Hp.digest(this.public.bytes);return zp.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return Gp.export(this.bytes,t);throw iu(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function Wp(e){if(e.length>xe.privateKeyLength){e=hr(e,xe.privateKeyLength+xe.publicKeyLength);let n=e.slice(0,xe.privateKeyLength),i=e.slice(xe.privateKeyLength,e.length);return new cr(n,i)}e=hr(e,xe.privateKeyLength);let t=e.slice(0,xe.privateKeyLength),r=e.slice(xe.publicKeyLength);return new cr(t,r)}function jp(e){return e=hr(e,xe.publicKeyLength),new Wn(e)}async function $p(){let{privateKey:e,publicKey:t}=await xe.generateKey();return new cr(e,t)}async function Yp(e){let{privateKey:t,publicKey:r}=await xe.generateKeyFromSeed(e);return new cr(t,r)}function hr(e,t){if(e=Uint8Array.from(e||[]),e.length!==t)throw iu(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}ou.exports={Ed25519PublicKey:Wn,Ed25519PrivateKey:cr,unmarshalEd25519PrivateKey:Wp,unmarshalEd25519PublicKey:jp,generateKeyPair:$p,generateKeyPairFromSeed:Yp}});var Eu=T((H,Su)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.utils=H.schnorr=H.verify=H.signSync=H.sign=H.getSharedSecret=H.recoverPublicKey=H.getPublicKey=H.SignResult=H.Signature=H.Point=H.CURVE=void 0;var j={a:0n,b:7n,P:2n**256n-2n**32n-977n,n:2n**256n-432420386565659656852420866394968145599n,h:1n,Gx:55066263022277343669578718895168534326250603453777594175500187360389116729240n,Gy:32670510020758816978083085130507043184471273380659243275938904335757337482424n,beta:0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501een};H.CURVE=j;function fu(e){let{a:t,b:r}=j;return D(e**3n+t*e+r)}var jn=j.a===0n,z=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof $))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new z(t.x,t.y,1n)}static toAffineBatch(t){let r=Zp(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return z.toAffineBatch(t).map(z.fromAffine)}equals(t){let r=this,n=t,i=D(r.z*r.z),a=D(r.z*i),s=D(n.z*n.z),o=D(n.z*s);return D(r.x*s)===D(i*n.x)&&D(r.y*o)===D(a*n.y)}negate(){return new z(this.x,D(-this.y),this.z)}double(){let t=this.x,r=this.y,n=this.z,i=D(t**2n),a=D(r**2n),s=D(a**2n),o=D(2n*(D(D((t+a)**2n))-i-s)),f=D(3n*i),u=D(f**2n),c=D(u-2n*o),h=D(f*(o-c)-8n*s),l=D(2n*r*n);return new z(c,h,l)}add(t){if(!(t instanceof z))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,n=this.y,i=this.z,a=t.x,s=t.y,o=t.z;if(a===0n||s===0n)return this;if(r===0n||n===0n)return t;let f=D(i**2n),u=D(o**2n),c=D(r*u),h=D(a*f),l=D(n*o*u),y=D(D(s*i)*f),p=D(h-c),g=D(y-l);if(p===0n)return g===0n?this.double():z.ZERO;let x=D(p**2n),b=D(p*x),E=D(c*x),A=D(g**2n-b-2n*E),k=D(g*(E-A)-l*b),_=D(i*o*p);return new z(A,k,_)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!lu(t))throw new TypeError("Point#multiply: expected valid scalar");let r=D(BigInt(t),j.n);if(!jn){let c=z.ZERO,h=this;for(;r>0n;)r&1n&&(c=c.add(h)),h=h.double(),r>>=1n;return c}let[n,i,a,s]=du(r),o=z.ZERO,f=z.ZERO,u=this;for(;i>0n||s>0n;)i&1n&&(o=o.add(u)),s&1n&&(f=f.add(u)),u=u.double(),i>>=1n,s>>=1n;return n&&(o=o.negate()),a&&(f=f.negate()),f=new z(D(f.x*j.beta),f.y,f.z),o.add(f)}precomputeWindow(t){let r=jn?128/t+1:256/t+1,n=[],i=this,a=i;for(let s=0;s<r;s++){a=i,n.push(a);for(let o=1;o<2**(t-1);o++)a=a.add(i),n.push(a);i=a.double()}return n}wNAF(t,r){!r&&this.equals(z.BASE)&&(r=$.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&ca.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=z.normalizeZ(i),ca.set(r,i)));let a=z.ZERO,s=z.ZERO,o=jn?128/n+1:256/n+1,f=2**(n-1),u=BigInt(2**n-1),c=2**n,h=BigInt(n);for(let l=0;l<o;l++){let y=l*f,p=Number(t&u);if(t>>=h,p>f&&(p-=c,t+=1n),p===0)s=s.add(l%2?i[y].negate():i[y]);else{let g=i[y+Math.abs(p)-1];a=a.add(p<0?g.negate():g)}}return[a,s]}multiply(t,r){if(!lu(t))throw new TypeError("Point#multiply: expected valid scalar");let n=D(BigInt(t),j.n),i,a;if(jn){let[s,o,f,u]=du(n),c,h,l,y;[c,l]=this.wNAF(o,r),[h,y]=this.wNAF(u,r),s&&(c=c.negate()),f&&(h=h.negate()),h=new z(D(h.x*j.beta),h.y,h.z),[i,a]=[c.add(h),l.add(y)]}else[i,a]=this.wNAF(n,r);return z.normalizeZ([i,a])[0]}toAffine(t=Wr(this.z)){let r=t**2n,n=D(this.x*r),i=D(this.y*r*t);return new $(n,i)}};z.BASE=new z(j.Gx,j.Gy,1n);z.ZERO=new z(0n,1n,0n);var ca=new WeakMap,$=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,ca.delete(this)}static fromCompressedHex(t){let r=t.length===32,n=ke(r?t:t.slice(1)),i=fu(n),a=Qp(i),s=(a&1n)===1n;r?s&&(a=D(-a)):(t[0]&1)==1!==s&&(a=D(-a));let o=new $(n,a);return o.assertValidity(),o}static fromUncompressedHex(t){let r=ke(t.slice(1,33)),n=ke(t.slice(33)),i=new $(r,n);return i.assertValidity(),i}static fromHex(t){let r=Qn(t),n=r[0];if(r.length===32||r.length===33&&(n===2||n===3))return this.fromCompressedHex(r);if(r.length===65&&n===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(t){return $.BASE.multiply(lr(t))}static fromSignature(t,r,n){let i=t instanceof Uint8Array?ke(t):lt(t),a=vu(r),{r:s,s:o}=a;if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid yParity bit");let f=2+(n&1),u=$.fromHex(`0${f}${Dt(s)}`),c=z.fromAffine(u).multiplyUnsafe(o),h=z.BASE.multiply(i),l=Wr(s,j.n),p=c.subtract(h).multiplyUnsafe(l).toAffine();return p.assertValidity(),p}toRawBytes(t=!1){return Pt(this.toHex(t))}toHex(t=!1){let r=Dt(this.x);return t?`${this.y&1n?"03":"02"}${r}`:`04${r}${Dt(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{P:r}=j,{x:n,y:i}=this;if(n===0n||i===0n||n>=r||i>=r)throw new Error(t);let a=D(i*i),s=fu(n);if((a-s)%r!==0n)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new $(this.x,D(-this.y))}double(){return z.fromAffine(this).double().toAffine()}add(t){return z.fromAffine(this).add(z.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return z.fromAffine(this).multiply(t,this).toAffine()}};H.Point=$;$.BASE=new $(j.Gx,j.Gy);$.ZERO=new $(0n,0n);function cu(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}var ht=class{constructor(t,r){this.r=t,this.s=r}static fromCompact(t){if(typeof t!="string"&&!(t instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=t instanceof Uint8Array?$n(t):t;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let n=new ht(lt(r.slice(0,64)),lt(r.slice(64,128)));return n.assertValidity(),n}static fromDER(t){let r="Signature.fromDER";if(typeof t!="string"&&!(t instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let n=t instanceof Uint8Array?$n(t):t,i=Gr(n.slice(2,4));if(n.slice(0,2)!=="30"||i!==n.length-4||n.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${n}`);let a=Gr(n.slice(6,8)),s=8+a,o=n.slice(8,s);if(o.startsWith("00")&&Gr(o.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let f=lt(o);if(n.slice(s,s+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let c=Gr(n.slice(s+2,s+4)),h=i-c-a-10;if(h>0||h===-4)throw new Error(`${r}: Invalid total length`);if(c>i-a-4)throw new Error(`${r}: Invalid s`);let l=s+4,y=n.slice(l,l+c);if(y.startsWith("00")&&Gr(y.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let p=lt(y),g=new ht(f,p);return g.assertValidity(),g}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!jr(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!jr(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(t=!1){return Pt(this.toDERHex(t))}toDERHex(t=!1){let r=cu(Hr(this.s));if(t)return r;let n=cu(Hr(this.r)),i=Hr(n.length/2),a=Hr(r.length/2);return`30${Hr(n.length/2+r.length/2+4)}02${i}${n}02${a}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Pt(this.toCompactHex())}toCompactHex(){return Dt(this.r)+Dt(this.s)}};H.Signature=ht;H.SignResult=ht;function hu(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}function $n(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function Dt(e){return e.toString(16).padStart(64,"0")}function Yn(e){return Pt(Dt(e))}function Hr(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function lt(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Pt(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function Qn(e){return e instanceof Uint8Array?e:Pt(e)}function ke(e){return lt($n(e))}function Gr(e){return Number.parseInt(e,16)*2}function lu(e){return!!(typeof e=="bigint"&&e>0n||typeof e=="number"&&e>0&&Number.isSafeInteger(e))}function D(e,t=j.P){let r=e%t;return r>=0?r:t+r}function Ne(e,t){let{P:r}=j,n=e;for(;t-- >0n;)n*=n,n%=r;return n}function Qp(e){let{P:t}=j,r=e*e*e%t,n=r*r*e%t,i=Ne(n,3n)*n%t,a=Ne(i,3n)*n%t,s=Ne(a,2n)*r%t,o=Ne(s,11n)*s%t,f=Ne(o,22n)*o%t,u=Ne(f,44n)*f%t,c=Ne(u,88n)*u%t,h=Ne(c,44n)*f%t,l=Ne(h,3n)*n%t,y=Ne(l,23n)*o%t,p=Ne(y,6n)*r%t;return Ne(p,2n)}function Wr(e,t=j.P){if(e===0n||t<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=D(e,t),n=t,[i,a,s,o]=[0n,1n,1n,0n];for(;r!==0n;){let u=n/r,c=n%r,h=i-s*u,l=a-o*u;[n,r]=[r,c],[i,a]=[s,o],[s,o]=[h,l]}if(n!==1n)throw new Error("invert: does not exist");return D(i,t)}function Zp(e,t=j.P){let r=e.length,n=new Array(r),i=1n;for(let a=0;a<r;a++)e[a]!==0n&&(n[a]=i,i=D(i*e[a],t));i=Wr(i,t);for(let a=r-1;a>=0;a--){if(e[a]===0n)continue;let s=D(i*e[a],t);e[a]=D(i*n[a],t),i=s}return e}var pu=(e,t)=>(e+t/2n)/t,Zn=2n**128n;function du(e){let{n:t}=j,r=0x3086d221a7d46bcde86c90e49284eb15n,n=-0xe4437ed6010e88286f547fa90abfe4c3n,i=0x114ca50f7a8e2f3f657c1108d9d44cfd8n,a=r,s=pu(a*e,t),o=pu(-n*e,t),f=D(e-s*r-o*i,t),u=D(-s*n-o*a,t),c=f>Zn,h=u>Zn;if(c&&(f=t-f),h&&(u=t-u),f>Zn||u>Zn)throw new Error("splitScalarEndo: Endomorphism failed");return[c,f,h,u]}function Xp(e){typeof e!="string"&&(e=$n(e));let t=lt(e||"0"),n=e.length/2*8-256;return n>0&&(t=t>>BigInt(n)),t>=j.n&&(t-=j.n),t}function yu(e,t){if(e==null)throw new Error(`sign: expected valid msgHash, not "${e}"`);let r=typeof e=="string"?lt(e):ke(e),n=Yn(r),i=ke(n),a=Yn(t),s=new Uint8Array(32).fill(1),o=new Uint8Array(32).fill(0),f=Uint8Array.from([0]),u=Uint8Array.from([1]);return[n,i,a,s,o,f,u]}async function Jp(e,t){let r=lr(t),[n,i,a,s,o,f,u]=yu(e,r),c=H.utils.hmacSha256;o=await c(o,s,f,a,n),s=await c(o,s),o=await c(o,s,u,a,n),s=await c(o,s);for(let h=0;h<1e3;h++){s=await c(o,s);let l=gu(s,i,r);if(l)return l;o=await c(o,s,f),s=await c(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function ed(e,t){let r=lr(t),[n,i,a,s,o,f,u]=yu(e,r),c=H.utils.hmacSha256Sync;if(!c)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(o=c(o,s,f,a,n),o instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");s=c(o,s),o=c(o,s,u,a,n),s=c(o,s);for(let h=0;h<1e3;h++){s=c(o,s);let l=gu(s,i,r);if(l)return l;o=c(o,s,f),s=c(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function jr(e){return 0<e&&e<j.n}function gu(e,t,r){let n=ke(e);if(!jr(n))return;let i=j.n,a=$.BASE.multiply(n),s=D(a.x,i),o=D(Wr(n,i)*(t+s*r),i);if(!(s===0n||o===0n))return[a,s,o]}function lr(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");t=lt(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");t=ke(e)}else throw new TypeError("Expected valid private key");if(!jr(t))throw new Error("Expected private key: 0 < key < n");return t}function ha(e){return e instanceof $?(e.assertValidity(),e):$.fromHex(e)}function vu(e){return e instanceof ht?(e.assertValidity(),e):ht.fromDER(e)}function td(e,t=!1){let r=$.fromPrivateKey(e);return typeof e=="string"?r.toHex(t):r.toRawBytes(t)}H.getPublicKey=td;function rd(e,t,r){let n=$.fromSignature(e,t,r);return typeof e=="string"?n.toHex():n.toRawBytes()}H.recoverPublicKey=rd;function xu(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===33||n===65:r?n===66||n===130:e instanceof $}function nd(e,t,r=!1){if(xu(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!xu(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=ha(t);n.assertValidity();let i=n.multiply(lr(e));return typeof e=="string"?i.toHex(r):i.toRawBytes(r)}H.getSharedSecret=nd;function mu(e,t,r=!1){let[n,i,a]=e,{canonical:s,der:o,recovered:f}=t,u=(n.x===i?0:2)|Number(n.y&1n),c=a,h=j.n>>1n;a>h&&s&&(c=j.n-a,u^=1);let l=new ht(i,c);l.assertValidity();let y=o===!1?l.toCompactHex():l.toDERHex(),p=r?y:Pt(y);return f?[p,u]:p}async function id(e,t,r={}){return mu(await Jp(e,t),r,typeof e=="string")}H.sign=id;function ad(e,t,r={}){return mu(ed(e,t),r,typeof e=="string")}H.signSync=ad;function sd(e,t,r){let{n}=j,i;try{i=vu(e)}catch(x){return!1}let{r:a,s}=i,o=Xp(t);if(o===0n)return!1;let f=z.fromAffine(ha(r)),u=Wr(s,n),c=D(o*u,n),h=D(a*u,n),l=z.BASE.multiply(c),y=f.multiplyUnsafe(h),p=l.add(y).toAffine();return D(p.x,n)===a}H.verify=sd;async function la(e,...t){let r=new Uint8Array(e.split("").map(a=>a.charCodeAt(0))),n=await H.utils.sha256(r),i=await H.utils.sha256(hu(n,n,...t));return ke(i)}async function bu(e,t,r){let n=Yn(e),i=await la("BIP0340/challenge",n,t.toRawX(),r);return D(i,j.n)}function pa(e){return D(e.y,2n)===0n}var Ht=class{constructor(t,r){if(this.r=t,this.s=r,t<=0n||r<=0n||t>=j.P||r>=j.n)throw new Error("Invalid signature")}static fromHex(t){let r=Qn(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=ke(r.slice(0,32)),i=ke(r.slice(32));return new Ht(n,i)}toHex(){return Dt(this.r)+Dt(this.s)}toRawBytes(){return Pt(this.toHex())}};function od(e){let t=$.fromPrivateKey(e);return typeof e=="string"?t.toHexX():t.toRawX()}async function ud(e,t,r=H.utils.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);t||(t=0n);let{n}=j,i=Qn(e),a=lr(t),s=Qn(r);if(s.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let o=$.fromPrivateKey(a),f=pa(o)?a:n-a,u=await la("BIP0340/aux",s),c=f^u,h=await la("BIP0340/nonce",Yn(c),o.toRawX(),i),l=D(h,n);if(l===0n)throw new Error("sign: Creation of signature failed. k is zero");let y=$.fromPrivateKey(l),p=pa(y)?l:n-l,g=await bu(y.x,o,i),x=new Ht(y.x,D(p+g*f,n));if(!await wu(x.toRawBytes(),i,o.toRawX()))throw new Error("sign: Invalid signature produced");return typeof e=="string"?x.toHex():x.toRawBytes()}async function wu(e,t,r){let n=e instanceof Ht?e:Ht.fromHex(e),i=typeof t=="string"?Pt(t):t,a=ha(r),s=await bu(n.r,a,i),o=$.fromPrivateKey(n.s),f=a.multiply(s),u=o.subtract(f);return!(u.equals($.BASE)||!pa(u)||u.x!==n.r)}H.schnorr={Signature:Ht,getPublicKey:od,sign:ud,verify:wu};$.BASE._setWindowSize(8);var Ie=(()=>{let e=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof Su!="undefined"&&typeof rn=="function"&&!e?nr():void 0,web:e}})();H.utils={isValidPrivateKey(e){try{return lr(e),!0}catch(t){return!1}},randomBytes:(e=32)=>{if(Ie.web)return Ie.web.getRandomValues(new Uint8Array(e));if(Ie.node){let{randomBytes:t}=Ie.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=8;for(;e--;){let t=H.utils.randomBytes(32),r=ke(t);if(jr(r)&&r!==1n)return t}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async e=>{if(Ie.web){let t=await Ie.web.subtle.digest("SHA-256",e.buffer);return new Uint8Array(t)}else if(Ie.node){let{createHash:t}=Ie.node;return Uint8Array.from(t("sha256").update(e).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(Ie.web){let r=await Ie.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=hu(...t),i=await Ie.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Ie.node){let{createHmac:r}=Ie.node,n=r("sha256",e);for(let i of t)n.update(i);return Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(e=8,t=$.BASE){let r=t===$.BASE?t:new $(t.x,t.y);return r._setWindowSize(e),r.multiply(3n),r}}});var Cu=T((U1,Au)=>{"use strict";var $r=Xe(),Kt=Eu(),{sha256:Bu}=(sr(),Vt);Au.exports=()=>{let e=32;function t(){return Kt.utils.randomPrivateKey()}async function r(u,c){let{digest:h}=await Bu.digest(c);try{return await Kt.sign(h,u)}catch(l){throw $r(l,"ERR_INVALID_INPUT")}}async function n(u,c,h){try{let{digest:l}=await Bu.digest(h);return Kt.verify(c,l,u)}catch(l){throw $r(l,"ERR_INVALID_INPUT")}}function i(u){return Kt.Point.fromHex(u).toRawBytes(!0)}function a(u){return Kt.Point.fromHex(u).toRawBytes(!1)}function s(u){try{Kt.getPublicKey(u,!0)}catch(c){throw $r(c,"ERR_INVALID_PRIVATE_KEY")}}function o(u){try{Kt.Point.fromHex(u)}catch(c){throw $r(c,"ERR_INVALID_PUBLIC_KEY")}}function f(u){try{return Kt.getPublicKey(u,!0)}catch(c){throw $r(c,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:t,privateKeyLength:e,hashAndSign:r,hashAndVerify:n,compressPublicKey:i,decompressPublicKey:a,validatePrivateKey:s,validatePublicKey:o,computePublicKey:f}}});var Ru=T((q1,_u)=>{"use strict";var{sha256:Tu}=(sr(),Vt),fd=Xe(),{equals:Iu}=(ur(),or),{toString:cd}=(At(),Bt),hd=Fn();_u.exports=(e,t,r)=>{r=r||Cu()();class n{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return e.PublicKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Iu(this.bytes,u.bytes)}async hash(){let{bytes:u}=await Tu.digest(this.bytes);return u}}class i{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return e.PrivateKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Iu(this.bytes,u.bytes)}async hash(){let{bytes:u}=await Tu.digest(this.bytes);return u}async id(){let u=await this.public.hash();return cd(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return hd.export(this.bytes,u);throw fd(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function a(f){return new i(f)}function s(f){return new n(f)}async function o(){let f=await r.generateKey();return new i(f)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:a,unmarshalSecp256k1PublicKey:s,generateKeyPair:o}}});var Pu=T((O1,Du)=>{"use strict";Du.exports={SHA1:20,SHA256:32,SHA512:64}});var Nu=T(ku=>{"use strict";var Ku=Lr(),ld=Pu(),pd={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},dd=async(e,t)=>{let r=await Ku.get().subtle.sign({name:"HMAC"},e,t);return new Uint8Array(r,r.byteOffset,r.byteLength)};ku.create=async function(e,t){let r=pd[e],n=await Ku.get().subtle.importKey("raw",t,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return dd(n,i)},length:ld[e]}}});var Fu=T((M1,Ou)=>{"use strict";var Lu=Xe(),{concat:Uu}=(Nr(),kr),{fromString:yd}=(Et(),St),gd=Nu(),qu={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};Ou.exports=async(e,t,r)=>{let n=qu[e];if(!n){let E=Object.keys(qu).join(" / ");throw Lu(new Error(`unknown cipher type '${e}'. Must be ${E}`),"ERR_INVALID_CIPHER_TYPE")}if(!t)throw Lu(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,a=n.ivSize,s=20,o=yd("key expansion"),f=2*(a+i+s),u=await gd.create(t,r),c=await u.digest(o),h=[],l=0;for(;l<f;){let E=await u.digest(Uu([c,o])),A=E.length;l+A>f&&(A=f-l),h.push(E),l+=A,c=await u.digest(c)}let y=f/2,p=Uu(h),g=p.slice(0,y),x=p.slice(y,f),b=E=>({iv:E.slice(0,a),cipherKey:E.slice(a,a+i),macKey:E.slice(a+i)});return{k1:b(g),k2:b(x)}}});var Vu=T((V1,Mu)=>{"use strict";var vd=Xe();Mu.exports=function(e,t){if(!e.includes(t)){let r=e.join(" / ");throw vd(new Error(`Unknown curve: ${t}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var $u=T(ju=>{"use strict";var xd=Xe(),Yr=Lr(),{base64urlToBuffer:zu}=On(),md=Vu(),{toString:da}=(At(),Bt),{concat:bd}=(Nr(),kr),{equals:wd}=(ur(),or),Hu={"P-256":256,"P-384":384,"P-521":521};ju.generateEphmeralKeyPair=async function(e){md(Object.keys(Hu),e);let t=await Yr.get().subtle.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"]),r=async(i,a)=>{let s;a?s=await Yr.get().subtle.importKey("jwk",Ed(e,a),{name:"ECDH",namedCurve:e},!1,["deriveBits"]):s=t.privateKey;let o=[await Yr.get().subtle.importKey("jwk",Wu(e,i),{name:"ECDH",namedCurve:e},!1,[]),s],f=await Yr.get().subtle.deriveBits({name:"ECDH",namedCurve:e,public:o[0]},o[1],Hu[e]);return new Uint8Array(f,f.byteOffset,f.byteLength)},n=await Yr.get().subtle.exportKey("jwk",t.publicKey);return{key:Sd(n),genSharedKey:r}};var Gu={"P-256":32,"P-384":48,"P-521":66};function Sd(e){let t=Gu[e.crv];return bd([Uint8Array.from([4]),zu(e.x,t),zu(e.y,t)],1+t*2)}function Wu(e,t){let r=Gu[e];if(wd(!t.slice(0,1),Uint8Array.from([4])))throw xd(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:e,x:da(t.slice(1,r+1),"base64url"),y:da(t.slice(1+r),"base64url"),ext:!0}}var Ed=(e,t)=>({...Wu(e,t.public),d:da(t.private,"base64url")})});var Qu=T((H1,Yu)=>{"use strict";var Bd=$u();Yu.exports=async e=>Bd.generateEphmeralKeyPair(e)});var Ju=T((G1,Xu)=>{"use strict";var rt=gn();_r();t0();var ya=Q(),Qr=Xe(),{fromString:Ad}=(Et(),St),Cd=w0(),Le={rsa:j0(),ed25519:uu(),secp256k1:Ru()(rt,ra())},Xn={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function pr(e){let t=Le[e.toLowerCase()];if(!t){let r=Object.keys(Le).join(" / ");throw Qr(new Error(`invalid or unsupported key type ${e}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return t}var Td=async(e,t)=>pr(e).generateKeyPair(t),Id=async(e,t,r)=>{let n=pr(e);if(e.toLowerCase()!=="ed25519")throw Qr(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(t,r)},_d=e=>{let t=rt.PublicKey.decode(e),r=t.Data;switch(t.Type){case rt.KeyType.RSA:return Le.rsa.unmarshalRsaPublicKey(r);case rt.KeyType.Ed25519:return Le.ed25519.unmarshalEd25519PublicKey(r);case rt.KeyType.Secp256k1:if(Le.secp256k1)return Le.secp256k1.unmarshalSecp256k1PublicKey(r);throw Qr(new Error(Xn.message),Xn.code);default:pr(t.Type)}},Rd=(e,t)=>(t=(t||"rsa").toLowerCase(),pr(t),e.bytes),Zu=async e=>{let t=rt.PrivateKey.decode(e),r=t.Data;switch(t.Type){case rt.KeyType.RSA:return Le.rsa.unmarshalRsaPrivateKey(r);case rt.KeyType.Ed25519:return Le.ed25519.unmarshalEd25519PrivateKey(r);case rt.KeyType.Secp256k1:if(Le.secp256k1)return Le.secp256k1.unmarshalSecp256k1PrivateKey(r);throw Qr(new Error(Xn.message),Xn.code);default:pr(t.Type)}},Dd=(e,t)=>(t=(t||"rsa").toLowerCase(),pr(t),e.bytes),Pd=async(e,t)=>{try{let i=await Cd.import(e,t);return Zu(i)}catch(i){}let r=ya.pki.decryptRsaPrivateKey(e,t);if(r===null)throw Qr(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=ya.asn1.toDer(ya.pki.privateKeyToAsn1(r));return n=Ad(n.getBytes(),"ascii"),Le.rsa.unmarshalRsaPrivateKey(n)};Xu.exports={supportedKeys:Le,keysPBM:rt,keyStretcher:Fu(),generateEphemeralKeyPair:Qu(),generateKeyPair:Td,generateKeyPairFromSeed:Id,unmarshalPublicKey:_d,marshalPublicKey:Rd,unmarshalPrivateKey:Zu,marshalPrivateKey:Dd,import:Pd}});var ef=T((W1,ga)=>{"use strict";function Kd(e,{className:t,symbolName:r}){let n=Symbol.for(r),i={[t]:class extends e{constructor(...a){super(...a);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i[`is${t}`]=a=>!!(a&&a[n]),i}function kd(e,{className:t,symbolName:r,withoutNew:n}){let i=Symbol.for(r),a={[t]:function(...s){if(n&&!(this instanceof a))return new a(...s);let o=e.call(this,...s)||this;return o&&!o[i]&&Object.defineProperty(o,i,{value:!0}),o}}[t];return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,Symbol.toStringTag,{get(){return t}}),a[`is${t}`]=s=>!!(s&&s[i]),a}ga.exports=Kd;ga.exports.proto=kd});var nf=T((j1,rf)=>{"use strict";var dr=Ei(),tf=dr.Reader,Nd=dr.Writer,ce=dr.util,Zr=dr.roots["libp2p-peer-id"]||(dr.roots["libp2p-peer-id"]={});Zr.PeerIdProto=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.id=ce.newBuffer([]),e.prototype.pubKey=ce.newBuffer([]),e.prototype.privKey=ce.newBuffer([]),e.encode=function(r,n){return n||(n=Nd.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},e.decode=function(r,n){r instanceof tf||(r=tf.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new Zr.PeerIdProto;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.id=r.bytes();break;case 2:a.pubKey=r.bytes();break;case 3:a.privKey=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("id"))throw ce.ProtocolError("missing required 'id'",{instance:a});return a},e.fromObject=function(r){if(r instanceof Zr.PeerIdProto)return r;var n=new Zr.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?ce.base64.decode(r.id,n.id=ce.newBuffer(ce.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?ce.base64.decode(r.pubKey,n.pubKey=ce.newBuffer(ce.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?ce.base64.decode(r.privKey,n.privKey=ce.newBuffer(ce.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=ce.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=ce.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=ce.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?ce.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?ce.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?ce.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,dr.util.toJSONOptions)},e}();rf.exports=Zr});var Gd=T((me,lf)=>{"use strict";var{CID:va}=(oi(),Fa),Ld=(br(),mr),Ud=(ui(),fn),qd=(Zt(),Qt),Od=(Sr(),Jt),{base58btc:xa}=(Zt(),Qt),{base32:Fd}=(br(),mr),{base16:af}=(fi(),cn),Xr=(xr(),an),nt=Ju(),Md=ef(),{PeerIdProto:sf}=nf(),{equals:Gt}=(ur(),or),{fromString:Jr}=(Et(),St),{toString:Vd}=(At(),Bt),{identity:Jn}=(Ln(),Kr),of={...Ld,...Ud,...qd,...Od},zd=Object.keys(of).reduce((e,t)=>e.or(of[t]),Fd.decoder),Hd=112,uf=114,ff=class{constructor(t,r,n){if(!(t instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!Gt(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=t,this._idB58String=xa.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(t){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(t){this._privKey=t}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let t=Xr.decode(this.id);t.code===Jn.code&&(this._pubKey=nt.unmarshalPublicKey(t.digest))}catch(t){}return this._pubKey}set pubKey(t){this._pubKey=t}marshalPubKey(){if(this.pubKey)return nt.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return nt.marshalPrivateKey(this.privKey)}marshal(t){return sf.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:t?null:this.marshalPrivKey()}).finish()}toPrint(){let t=this.toB58String();t.startsWith("Qm")&&(t=t.slice(2));let r=6;return t.length<r&&(r=t.length),"<peer.ID "+t.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:hf(this.marshalPrivKey()),pubKey:hf(this.marshalPubKey())}}toHexString(){return af.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let t=va.createV1(uf,Xr.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:t.toString(),enumerable:!1})}return this._idCIDString}equals(t){if(t instanceof Uint8Array)return Gt(this.id,t);if(t.id)return Gt(this.id,t.id);throw new Error("not valid Id")}isEqual(t){return this.equals(t)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Gt(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(Xr.decode(this.id).code===Jn.code)return!0}catch(t){}return!1}},it=Md(ff,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});me=lf.exports=it;var en=e=>e.bytes.length<=42?Xr.create(Jn.code,e.bytes).bytes:e.hash(),ma=async(e,t)=>{let r=await en(t);return new it(r,e,t)};me.create=async e=>{e=e||{},e.bits=e.bits||2048,e.keyType=e.keyType||"RSA";let t=await nt.generateKeyPair(e.keyType,e.bits);return ma(t,t.public)};me.createFromHexString=e=>new it(af.decode("f"+e));me.createFromBytes=e=>{try{let t=va.decode(e);if(!cf(t))throw new Error("Supplied PeerID CID is invalid");return me.createFromCID(t)}catch{if(Xr.decode(e).code!==Jn.code)throw new Error("Supplied PeerID CID is invalid");return new it(e)}};me.createFromB58String=e=>me.createFromBytes(xa.decode("z"+e));var cf=e=>e.code===uf||e.code===Hd;me.createFromCID=e=>{if(e=va.asCID(e),!e||!cf(e))throw new Error("Supplied PeerID CID is invalid");return new it(e.multihash.bytes)};me.createFromPubKey=async e=>{let t=e;if(typeof t=="string"&&(t=Jr(e,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await nt.unmarshalPublicKey(t);return ma(void 0,r)};me.createFromPrivKey=async e=>{if(typeof e=="string"&&(e=Jr(e,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let t=await nt.unmarshalPrivateKey(e);return ma(t,t.public)};me.createFromJSON=async e=>{let t=xa.decode("z"+e.id),r=e.privKey&&Jr(e.privKey,"base64pad"),n=e.pubKey&&Jr(e.pubKey,"base64pad"),i=n&&await nt.unmarshalPublicKey(n);if(!r)return new it(t,void 0,i);let a=await nt.unmarshalPrivateKey(r),s=await en(a.public),o;if(i&&(o=await en(i)),i&&!Gt(s,o))throw new Error("Public and private key do not match");if(t&&!Gt(s,t))throw new Error("Id and private key do not match");return new it(t,a,i)};me.createFromProtobuf=async e=>{typeof e=="string"&&(e=Jr(e,"base16"));let{id:t,privKey:r,pubKey:n}=sf.decode(e);r=r?await nt.unmarshalPrivateKey(r):!1,n=n?await nt.unmarshalPublicKey(n):!1;let i,a;if(r&&(a=await en(r.public)),n&&(i=await en(n)),r){if(n&&!Gt(a,i))throw new Error("Public and private key do not match");return new it(a,r,r.public)}if(n)return new it(i,void 0,n);if(t)return new it(t);throw new Error("Protobuf did not contain any usable key material")};me.parse=e=>((e.charAt(0)==="1"||e.charAt(0)==="Q")&&(e=`z${e}`),me.createFromBytes(zd.decode(e)));me.isPeerId=e=>Boolean(typeof e=="object"&&e._id&&e._idB58String);function hf(e){if(e)return Vd(e,"base64pad")}});return Gd();})();
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
return PeerId}));
